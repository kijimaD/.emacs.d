<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-12-18 Sun 14:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>kijimad Emacs Config</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">kijimad Emacs Config</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgeaf6c8a">1. Emacs</a></li>
<li><a href="#org1e11bc6">2. Org</a></li>
<li><a href="#org353dcfe">3. Agenda</a></li>
<li><a href="#org2cb5f35">4. Pomodoro</a></li>
<li><a href="#org75700ba">5. Font</a></li>
<li><a href="#org1eb2216">6. Simple</a></li>
<li><a href="#orga7dad95">7. Packages</a></li>
<li><a href="#org78d37de">8. Rails</a></li>
<li><a href="#orgbffbb7c">9. Go</a></li>
<li><a href="#org02f8ebb">10. Python</a></li>
<li><a href="#org473ebae">11. Haskell</a></li>
<li><a href="#orgc0882a0">12. Web</a></li>
<li><a href="#org849eebe">13. LSP</a></li>
<li><a href="#org9cccde1">14. corfu</a></li>
<li><a href="#org8974af8">15. ivy</a></li>
<li><a href="#org93b4262">16. counsel</a></li>
<li><a href="#org48950a0">17. ag</a></li>
<li><a href="#org5b00db2">18. eldoc</a></li>
<li><a href="#org732fab7">19. eshell</a></li>
<li><a href="#org1434696">20. Vterm</a></li>
<li><a href="#org46745e3">21. Theme</a></li>
<li><a href="#orgc7cc2c3">22. EXWM</a></li>
<li><a href="#org88cdaed">23. Polybar</a></li>
<li><a href="#org0dda401">24. Workspace</a></li>
<li><a href="#org5d91f95">25. Hydra</a></li>
<li><a href="#org7654b4f">26. Display Manager</a></li>
<li><a href="#org584d4cd">27. Helper</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgeaf6c8a" class="outline-2">
<h2 id="orgeaf6c8a"><span class="section-number-2">1.</span> Emacs</h2>
<div class="outline-text-2" id="text-1">
<p>
Emacsの文芸的設定。移行作業中。
</p>

<ul class="org-ul">
<li><a href="https://github.com/kijimaD/.emacs.d">Repository</a></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>package設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)

(<span style="font-weight: bold;">setq</span> package-archives
      '((<span style="font-style: italic;">"elpy"</span> . <span style="font-style: italic;">"https://jorgenschaefer.github.io/packages/"</span>)
        (<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"https://melpa.org/packages/"</span>)
        (<span style="font-style: italic;">"gnu"</span> . <span style="font-style: italic;">"https://elpa.gnu.org/packages/"</span>)
        (<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"http://orgmode.org/elpa/"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e11bc6" class="outline-2">
<h2 id="org1e11bc6"><span class="section-number-2">2.</span> Org</h2>
<div class="outline-text-2" id="text-2">
<p>
org用の設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>基本設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-protocol</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">System locale to use for formatting time values.</span>
(<span style="font-weight: bold;">setq</span> system-time-locale <span style="font-style: italic;">"C"</span>)         <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Make sure that the weekdays in the</span>
                                        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">time stamps of your Org mode files and</span>
                                        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">in the agenda appear in English.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25313;&#24373;&#23376;&#12364;org&#12398;&#12501;&#12449;&#12452;&#12523;&#12434;&#38283;&#12356;&#12383;&#26178;&#65292;&#33258;&#21205;&#30340;&#12395;org-mode&#12395;&#12377;&#12427;</span>
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.org$"</span> . org-mode))

(<span style="font-weight: bold;">setq</span> org-startup-folded 'content)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-mode&#12391;&#12398;&#24375;&#35519;&#34920;&#31034;&#12434;&#21487;&#33021;&#12395;&#12377;&#12427;</span>
(add-hook 'org-mode-hook 'turn-on-font-lock)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'org-mode-hook 'current-word-highlight-mode)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#26412;&#25991;&#12434;&#33258;&#21205;&#12452;&#12531;&#12487;&#12531;&#12488;</span>
(<span style="font-weight: bold;">setq</span> org-startup-indented t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35211;&#20986;&#12375;&#12398;&#20313;&#20998;&#12394;*&#12434;&#28040;&#12377;</span>
(<span style="font-weight: bold;">setq</span> org-hide-leading-stars t)
(<span style="font-weight: bold;">setq</span> org-hide-emphasis-markers t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#30011;&#20687;&#34920;&#31034;</span>
(<span style="font-weight: bold;">setq</span> org-startup-with-inline-images t)

(<span style="font-weight: bold;">setq</span> org-todo-keywords '((type <span style="font-style: italic;">"TODO"</span> <span style="font-style: italic;">"WIP"</span> <span style="font-style: italic;">"|"</span> <span style="font-style: italic;">"DONE"</span> <span style="font-style: italic;">"CLOSE"</span>)))
(<span style="font-weight: bold;">setq</span> org-todo-keyword-faces
      '((<span style="font-style: italic;">"TODO"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"orange"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"WIP"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"DeepSkyBlue"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"DONE"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"green"</span> <span style="font-weight: bold;">:weight</span> bold))
        (<span style="font-style: italic;">"CLOSE"</span> . (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"DarkOrchid"</span> <span style="font-weight: bold;">:weight</span> bold))))

(<span style="font-weight: bold;">setq</span> org-src-fontify-natively t)
(<span style="font-weight: bold;">setq</span> org-fontify-quote-and-verse-blocks t)
(<span style="font-weight: bold;">setq</span> org-src-tab-acts-natively t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23637;&#38283;&#12450;&#12452;&#12467;&#12531;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "&#187;")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "..")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "&#10549;")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "&#129175;")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "&#10070;")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-ellipsis "&#8623;")</span>
(<span style="font-weight: bold;">setq</span> org-ellipsis <span style="font-style: italic;">"&#9661;"</span>)
(<span style="font-weight: bold;">setq</span> org-cycle-separator-lines 2)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-mode&#12391;&#34892;&#26411;&#12391;&#25240;&#12426;&#36820;&#12375;&#12434;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> org-startup-truncated nil)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">change-truncation</span>()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">cond</span> ((eq truncate-lines nil)
         (<span style="font-weight: bold;">setq</span> truncate-lines t))
        (t
         (<span style="font-weight: bold;">setq</span> truncate-lines nil))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12500;&#12540;&#12489;&#12467;&#12510;&#12531;&#12489;&#26377;&#21177;&#21270;</span>
(<span style="font-weight: bold;">setq</span> org-use-speed-commands t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12461;&#12540;&#12496;&#12452;&#12531;&#12489; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12411;&#12363;&#12392;&#12363;&#12406;&#12427;&#12398;&#12391;&#28961;&#21177;&#21270;</span>
(define-key org-mode-map (kbd <span style="font-style: italic;">"C-c C-j"</span>) nil)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key org-mode-map (kbd "&lt;S-left&gt;") nil)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key org-mode-map (kbd "&lt;S-right&gt;") nil)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key org-mode-map (kbd "&lt;S-up&gt;") nil)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key org-mode-map (kbd "&lt;S-down&gt;") nil)</span>
(define-key org-mode-map (kbd <span style="font-style: italic;">"M-&lt;left&gt;"</span>) nil)
(define-key org-mode-map (kbd <span style="font-style: italic;">"M-&lt;right&gt;"</span>) nil)
(define-key org-mode-map (kbd <span style="font-style: italic;">"C-c C-x i"</span>) 'org-clock-in)
(define-key org-mode-map (kbd <span style="font-style: italic;">"C-c C-x o"</span>) 'org-clock-out)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-babel ================</span>
(org-babel-do-load-languages 'org-babel-load-languages
                             '((C . t)
                               (clojure . t)
                               (emacs-lisp . t)
                               (graphql . t)
                               (haskell . t)
                               (lisp . t)
                               (python . t)
                               (ruby . t)
                               (rust . t)
                               (shell . t)
                               (sql . t)))

(<span style="font-weight: bold;">setq</span> org-confirm-babel-evaluate nil)
(<span style="font-weight: bold;">setq</span> org-babel-clojure-backend 'cider)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">cider</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">common lisp</span>
(<span style="font-weight: bold;">setq</span> inferior-lisp-program <span style="font-style: italic;">"clisp"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">clisp, sbcl,  ...</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#26085;&#35468; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-journal</span>)
(<span style="font-weight: bold;">setq</span> org-journal-date-format <span style="font-style: italic;">"%Y-%m-%d(%a)"</span>)
(<span style="font-weight: bold;">setq</span> org-journal-time-format <span style="font-style: italic;">"%R "</span>)
(<span style="font-weight: bold;">setq</span> org-journal-dir (concat <span style="font-style: italic;">"~/Private/junk/diary/org-journal"</span>))
(<span style="font-weight: bold;">setq</span> org-journal-file-format <span style="font-style: italic;">"%Y%m%d.org"</span>)
(<span style="font-weight: bold;">setq</span> org-journal-find-file 'find-file)
(<span style="font-weight: bold;">setq</span> org-journal-hide-entries-p nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://emacs.stackexchange.com/questions/17897/create-an-org-journal-template-for-daily-journal-entry/32655#32655?newreg=7c9543fa39e342cfb438c4168020447d</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/new-buffer-p</span> ()
  (not (file-exists-p (buffer-file-name))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/insert-journal-template</span> ()
  (<span style="font-weight: bold;">let</span> ((template-file (expand-file-name <span style="font-style: italic;">"~/.emacs.d/resources/journal-template.org"</span> org-directory)))
    (<span style="font-weight: bold;">when</span> (kd/new-buffer-p)
      (<span style="font-weight: bold;">save-excursion</span>
        (goto-char (point-min))
        (insert-file-contents template-file)))))

(add-hook 'org-journal-after-entry-create-hook #'kd/insert-journal-template)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20351;&#12356;&#25448;&#12390;&#12398;&#12501;&#12449;&#12452;&#12523;&#12434;&#38283;&#12367; ================</span>
(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">open-junk-file</span>)
(<span style="font-weight: bold;">setq</span> open-junk-file-format (concat <span style="font-style: italic;">"~/Private/junk/%Y-%m-%d-%H%M%S."</span>))
(global-set-key (kbd <span style="font-style: italic;">"C-x C-z"</span>) 'open-junk-file)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35211;&#20986;&#12375;&#12434;&#12356;&#12356;&#24863;&#12376;&#12395;&#12377;&#12427; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'org-bullets)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-superstar</span>)
(add-hook 'org-mode-hook (<span style="font-weight: bold;">lambda</span> () (org-superstar-mode 1)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-modern</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'org-mode-hook #'org-modern-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'org-agenda-finalize-hook #'org-modern-agenda)</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-sticky-header</span>)
(<span style="font-weight: bold;">setq</span> org-sticky-header-full-path 'full)
(<span style="font-weight: bold;">setq</span> org-sticky-header-heading-star <span style="font-style: italic;">"&#9673;"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12521;&#12452;&#12489; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-tree-slide-simple-profile)</span>
(org-tree-slide-presentation-profile)
(org-tree-slide--hide-slide-header)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">pdf ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(pdf-tools-install t)</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">pdf-tools</span>)
(add-hook 'pdf-tools-enabled-hook 'pdf-view-midnight-minor-mode)
(<span style="font-weight: bold;">setq-default</span> pdf-view-display-size 'fit-page)
(<span style="font-weight: bold;">setq</span> pdf-annot-activate-created-annotations t)
(define-key pdf-view-mode-map (kbd <span style="font-style: italic;">"C-s"</span>) 'isearch-forward)
(<span style="font-weight: bold;">setq</span> pdf-view-resize-factor 1.1)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">roam ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-roam</span>)
(add-hook 'after-init-hook 'org-roam-mode)
(make-directory <span style="font-style: italic;">"~/roam"</span> t)
(<span style="font-weight: bold;">setq</span> org-roam-v2-ack t)
(<span style="font-weight: bold;">setq</span> org-roam-directory <span style="font-style: italic;">"~/roam"</span>)
(<span style="font-weight: bold;">setq</span> org-roam-completion-everywhere t)

(define-key global-map (kbd <span style="font-style: italic;">"C-c n f"</span>) 'org-roam-node-find)
(define-key global-map (kbd <span style="font-style: italic;">"C-c n g"</span>) 'org-roam-graph)
(define-key global-map (kbd <span style="font-style: italic;">"C-c n i"</span>) 'org-roam-node-insert)
(define-key global-map (kbd <span style="font-style: italic;">"C-c n r"</span>) 'org-roam-node-random)
(define-key global-map (kbd <span style="font-style: italic;">"C-c n l"</span>) 'org-roam-buffer-toggle)
(define-key global-map (kbd <span style="font-style: italic;">"C-M-i"</span>) 'completion-at-point)

(<span style="font-weight: bold;">setq</span> org-roam-capture-templates
      '((<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"TODO"</span> entry
         (file+headline my-todo-file <span style="font-style: italic;">"Inbox"</span>)
         <span style="font-style: italic;">"*** TODO %?\n"</span>)
        (<span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"default"</span> plain
         <span style="font-style: italic;">"%?"</span>
         <span style="font-weight: bold;">:if-new</span>
         (file+head <span style="font-style: italic;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}"</span>))
        (<span style="font-style: italic;">"r"</span> <span style="font-style: italic;">"roam-page"</span> plain
         (file <span style="font-style: italic;">"~/roam/templates/roam-page.org"</span>)
         <span style="font-weight: bold;">:if-new</span>
         (file+head <span style="font-style: italic;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}"</span>))
        (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"project"</span> plain
         (file <span style="font-style: italic;">"~/roam/templates/project.org"</span>)
         <span style="font-weight: bold;">:if-new</span>
         (file+head <span style="font-style: italic;">"%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span> <span style="font-style: italic;">"#+title: ${title}\n#+filetags: Project"</span>))
        ))

(<span style="font-weight: bold;">setq</span> org-id-link-to-org-use-id t)
(<span style="font-weight: bold;">setq</span> org-id-extra-files (org-roam--list-files org-roam-directory))

(<span style="font-weight: bold;">setq</span> org-roam-v2-ack t)

(org-roam-setup)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#30011;&#20687; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-download</span>)
(<span style="font-weight: bold;">setq-default</span> org-download-image-dir <span style="font-style: italic;">"~/roam/images"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12486;&#12531;&#12503;&#12524;&#12540;&#12488; ================</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'org
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This is needed as of Org 9.2</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-tempo</span>)

  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"cj"</span> . <span style="font-style: italic;">"src clojure"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"cl"</span> . <span style="font-style: italic;">"src C"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"el"</span> . <span style="font-style: italic;">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"gp"</span> . <span style="font-style: italic;">"src git-permalink"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"go"</span> . <span style="font-style: italic;">"src go"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"gq"</span> . <span style="font-style: italic;">"src graphql"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"hs"</span> . <span style="font-style: italic;">"src haskell"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"js"</span> . <span style="font-style: italic;">"src javascript"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"py"</span> . <span style="font-style: italic;">"src python"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"rb"</span> . <span style="font-style: italic;">"src ruby"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"rs"</span> . <span style="font-style: italic;">"src rust"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"sc"</span> . <span style="font-style: italic;">"src scala"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"sh"</span> . <span style="font-style: italic;">"src shell"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"sq"</span> . <span style="font-style: italic;">"src sql"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"ts"</span> . <span style="font-style: italic;">"src typescript"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">sql</span>
(add-hook 'sql-mode-org-src-hook #'sqlind-minor-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20013;&#22830;&#23492;&#12379; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">visual-fill-column</span>)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/centering-buffer</span> ()
  <span style="font-style: italic;">"Centering buffer."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">setq</span> visual-fill-column-width 100
        visual-fill-column-center-text t)
  (visual-fill-column-mode 1))

(add-hook 'org-mode-hook (<span style="font-weight: bold;">lambda</span> () (kd/centering-buffer)))
(add-hook 'eww-mode-hook (<span style="font-weight: bold;">lambda</span> () (kd/centering-buffer)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">face ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">theme&#12398;&#12354;&#12392;&#12395;&#35413;&#20385;&#12377;&#12427;&#12383;&#12417;&#12289;&#12371;&#12371;&#12391;&#12399;&#38306;&#25968;&#23450;&#32681;&#12384;&#12369;&#12290;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://github.com/daviwil/emacs-from-scratch/blob/master/Emacs.org</span>

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/org-font-setup</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Replace list hyphen with dot</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(font-lock-add-keywords 'org-mode</span>
  <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">'(("^ *\\([-]\\) "</span>
  <span style="font-weight: bold; font-style: italic;">;;                            </span><span style="font-weight: bold; font-style: italic;">(0 (prog1 () (compose-region (match-beginning 1) (match-end 1) "&#10022;"))))))</span>

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq org-superstar-headline-bullets-list '("&#128592;" "&#128593;" "&#128594;" "&#128595;" "&#128596;" "&#128597;" "&#128598;" "&#128599;"))</span>
  (<span style="font-weight: bold;">setq</span> org-superstar-headline-bullets-list '(<span style="font-style: italic;">"&#9673;"</span> <span style="font-style: italic;">"&#9675;"</span> <span style="font-style: italic;">"&#9679;"</span> <span style="font-style: italic;">"&#10047;"</span> <span style="font-style: italic;">"&#10040;"</span>))

  (<span style="font-weight: bold;">setq</span> org-superstar-item-bullet-alist '((?* . ?&#8226;)
                                          (?+ . ?&#187;)
                                          (?- . ?&#10148;)))

  (<span style="font-weight: bold;">dolist</span> (face '((org-level-1 . 1.0)
                  (org-level-2 . 1.0)
                  (org-level-3 . 1.0)
                  (org-level-4 . 1.0)
                  (org-level-5 . 1.0)
                  (org-level-6 . 1.0)
                  (org-level-7 . 1.0)
                  (org-level-8 . 1.0)))
    (set-face-attribute (car face) nil <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"Hiragino Sans"</span> <span style="font-weight: bold;">:height</span> (cdr face) <span style="font-weight: bold;">:weight</span> 'bold))

  (set-face-attribute 'org-block nil    <span style="font-weight: bold;">:foreground</span> nil <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'org-table nil    <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'org-formula nil  <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'org-code nil     <span style="font-weight: bold;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-table nil    <span style="font-weight: bold;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-verbatim nil <span style="font-weight: bold;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-special-keyword nil <span style="font-weight: bold;">:inherit</span> '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-meta-line nil <span style="font-weight: bold;">:inherit</span> '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-checkbox nil  <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'line-number nil <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'line-number-current-line nil <span style="font-weight: bold;">:inherit</span> 'fixed-pitch)

  (custom-theme-set-faces
   'user
   '(variable-pitch ((t (<span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Helvetica Neue"</span> <span style="font-weight: bold;">:height</span> 1.0 <span style="font-weight: bold;">:weight</span> regular))))
   '(fixed-pitch ((t (<span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Fira Mono"</span> <span style="font-weight: bold;">:height</span> 1.0))))
   '(org-block ((t (<span style="font-weight: bold;">:inherit</span> fixed-pitch))))
   '(org-code ((t (<span style="font-weight: bold;">:inherit</span> (shadow fixed-pitch)))))
   '(org-document-info ((t (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"dark orange"</span>))))
   '(org-document-info-keyword ((t (<span style="font-weight: bold;">:inherit</span> (shadow fixed-pitch)))))
   '(org-indent ((t (<span style="font-weight: bold;">:inherit</span> (org-hide fixed-pitch)))))
   '(org-link ((t (<span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"royal blue"</span> <span style="font-weight: bold;">:underline</span> t))))
   '(org-meta-line ((t (<span style="font-weight: bold;">:inherit</span> (font-lock-comment-face fixed-pitch)))))
   '(org-property-value ((t (<span style="font-weight: bold;">:inherit</span> fixed-pitch))) t)
   '(org-special-keyword ((t (<span style="font-weight: bold;">:inherit</span> (font-lock-comment-face fixed-pitch)))))
   '(org-table ((t (<span style="font-weight: bold;">:inherit</span> fixed-pitch <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#f5f5f5"</span>))))
   '(org-tag ((t (<span style="font-weight: bold;">:inherit</span> (shadow fixed-pitch) <span style="font-weight: bold;">:weight</span> bold <span style="font-weight: bold;">:height</span> 0.8))))
   '(org-verbatim ((t (<span style="font-weight: bold;">:inherit</span> (shadow fixed-pitch)))))
   '(org-block-begin-line ((t (<span style="font-weight: bold;">:inherit</span> org-block))))))

(add-hook 'org-mode-hook 'variable-pitch-mode)
(add-hook 'org-mode-hook 'visual-line-mode)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-lint-dir</span> (directory)
  (<span style="font-weight: bold;">let*</span> ((files (directory-files directory t <span style="font-style: italic;">".*\\.org$"</span>)))
    (org-lint-list files)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-lint-list</span> (files)
  (<span style="font-weight: bold;">cond</span> (files
         (org-lint-file (car files))
         (org-lint-list (cdr files)))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-lint-file</span> (file)
  (<span style="font-weight: bold;">let</span> ((buf)
        (lint))
    (<span style="font-weight: bold;">setq</span> buf (find-file-noselect file))
    (<span style="font-weight: bold;">with-current-buffer</span> buf (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">setq</span> lint (org-lint)) (print (list file lint))))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-alert ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-alert</span>)
(<span style="font-weight: bold;">setq</span> alert-default-style 'notifications)
(<span style="font-weight: bold;">setq</span> org-alert-interval 300)
(<span style="font-weight: bold;">setq</span> org-alert-notification-title <span style="font-style: italic;">"Reminder"</span>)
(org-alert-enable)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">denote ================</span>
(<span style="font-weight: bold;">setq</span> denote-directory (expand-file-name <span style="font-style: italic;">"~/roam/denote"</span>))
(<span style="font-weight: bold;">setq</span> denote-known-keywords '(<span style="font-style: italic;">"essay"</span> <span style="font-style: italic;">"code-reading"</span> <span style="font-style: italic;">"book"</span> <span style="font-style: italic;">"hack"</span>))

(define-key global-map (kbd <span style="font-style: italic;">"C-c d"</span>) 'denote-create-note)
</pre>
</div>
</div>
</div>

<div id="outline-container-org353dcfe" class="outline-2">
<h2 id="org353dcfe"><span class="section-number-2">3.</span> Agenda</h2>
<div class="outline-text-2" id="text-3">
<p>
agenda用の設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp">(define-key global-map <span style="font-style: italic;">"\C-cl"</span> 'org-store-link)
(define-key global-map <span style="font-style: italic;">"\C-ca"</span> 'org-agenda)
(define-key global-map <span style="font-style: italic;">"\C-cc"</span> 'org-capture)

(add-hook 'org-pomodoro-short-break-finished-hook 'org-agenda-default)
(add-hook 'org-pomodoro-long-break-finished-hook 'org-agenda-default)

(<span style="font-weight: bold;">setq</span> org-capture-templates
      '((<span style="font-style: italic;">"m"</span> <span style="font-style: italic;">"Memo"</span> entry
         (file+headline my-todo-file <span style="font-style: italic;">"Memo"</span>)
         <span style="font-style: italic;">"** %?\n"</span>)
        (<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"Task"</span> entry
         (file+headline my-todo-file <span style="font-style: italic;">"Tasks"</span>)
         <span style="font-style: italic;">"** TODO %?\n"</span>)
        (<span style="font-style: italic;">"p"</span> <span style="font-style: italic;">"Protocol"</span> entry
         (file+headline my-todo-file <span style="font-style: italic;">"Inbox"</span>)
         <span style="font-style: italic;">"* %^{Title}\nSource: %u, %c\n #+BEGIN_QUOTE\n%i\n#+END_QUOTE\n\n\n%?"</span>)
        (<span style="font-style: italic;">"L"</span> <span style="font-style: italic;">"Protocol Link"</span> entry
         (file+headline my-todo-file <span style="font-style: italic;">"Inbox"</span>)
         <span style="font-style: italic;">"* %?[[%:link][%:description]]"</span>)))

(<span style="font-weight: bold;">setq</span> org-log-done t)

(<span style="font-weight: bold;">setq</span> my-org-directory (concat <span style="font-style: italic;">"~/Private/junk/diary/org-journal/"</span>))
(<span style="font-weight: bold;">setq</span> my-todo-file (concat my-org-directory <span style="font-style: italic;">"todo.org"</span>))

(<span style="font-weight: bold;">if</span> (file-exists-p my-todo-file)
    (<span style="font-weight: bold;">setq</span> org-agenda-files `(<span style="font-style: italic;">"~/roam"</span> <span style="font-style: italic;">"~/roam/denote"</span> ,my-todo-file)))

(<span style="font-weight: bold;">setq</span> org-directory my-org-directory)
(<span style="font-weight: bold;">setq</span> org-default-notes-file my-todo-file)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#26178;&#21051;&#12434;&#12487;&#12501;&#12457;&#12523;&#12488;&#34920;&#31034;</span>
(<span style="font-weight: bold;">setq</span> org-agenda-start-with-log-mode t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">7&#26085;&#20998;&#12398;&#20104;&#23450;&#12434;&#34920;&#31034;&#12373;&#12379;&#12427;</span>
(<span style="font-weight: bold;">setq</span> org-agenda-span 14)
(<span style="font-weight: bold;">setq</span> org-agenda-start-day <span style="font-style: italic;">"7d"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">agenda&#12395;&#12399;&#12289;&#32722;&#24931;&#12539;&#12473;&#12465;&#12472;&#12517;&#12540;&#12523;&#12539;TODO&#12434;&#34920;&#31034;&#12373;&#12379;&#12427;</span>
(<span style="font-weight: bold;">setq</span> org-agenda-custom-commands
      '((<span style="font-style: italic;">"a"</span> <span style="font-style: italic;">"Agenda and all TODO's"</span>
         ((tags <span style="font-style: italic;">"project-CLOCK=&gt;\"&lt;today&gt;\"|repeatable"</span>) (agenda <span style="font-style: italic;">""</span>) (alltodo)))))
(<span style="font-weight: bold;">setq</span> org-agenda-custom-commands nil)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-agenda-default</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (persp-switch <span style="font-style: italic;">"2"</span>)
  (org-agenda nil <span style="font-style: italic;">"z"</span>))
(global-set-key (kbd <span style="font-style: italic;">"&lt;f6&gt;"</span>) 'org-agenda-default)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">agenda&#20869;&#12391;R&#12391;&#20986;&#12427;clocktable&#12398;&#35373;&#23450;&#12290;</span>
(<span style="font-weight: bold;">setq</span> org-clocktable-defaults '(<span style="font-weight: bold;">:maxlevel</span> 3 <span style="font-weight: bold;">:scope</span> agenda <span style="font-weight: bold;">:tags</span> <span style="font-style: italic;">""</span> <span style="font-weight: bold;">:block</span> today <span style="font-weight: bold;">:step</span> day <span style="font-weight: bold;">:stepskip0</span> true <span style="font-weight: bold;">:fileskip0</span> true))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-super-agenda ================</span>
(org-super-agenda-mode)

(<span style="font-weight: bold;">let</span> ((org-super-agenda-groups
       '(<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Each group has an implicit boolean OR operator between its selectors.</span>
         (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Today"</span>  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Optionally specify section name</span>
                <span style="font-weight: bold;">:time-grid</span> t  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Items that appear on the time grid</span>
                <span style="font-weight: bold;">:todo</span> <span style="font-style: italic;">"TODAY"</span>)  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Items that have this TODO keyword</span>
         (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Important"</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Single arguments given alone</span>
                <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"bills"</span>
                <span style="font-weight: bold;">:priority</span> <span style="font-style: italic;">"A"</span>)
         (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"WIP"</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Single arguments given alone</span>
                <span style="font-weight: bold;">:todo</span> <span style="font-style: italic;">"WIP"</span>)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Set order of multiple groups at once</span>
         (<span style="font-weight: bold;">:order-multi</span> (2 (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Shopping in town"</span>
                                 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Boolean AND group matches items that match all subgroups</span>
                                 <span style="font-weight: bold;">:and</span> (<span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"shopping"</span> <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"@town"</span>))
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Food-related"</span>
                                 <span style="font-weight: bold;">:habit</span> t
                                 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Multiple args given in list with implicit OR</span>
                                 <span style="font-weight: bold;">:tag</span> (<span style="font-style: italic;">"food"</span> <span style="font-style: italic;">"dinner"</span>))
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Space-related (non-moon-or-planet-related)"</span>
                                 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Regexps match case-insensitively on the entire entry</span>
                                 <span style="font-weight: bold;">:and</span> (<span style="font-weight: bold;">:regexp</span> (<span style="font-style: italic;">"space"</span> <span style="font-style: italic;">"NASA"</span>)
                                               <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Boolean NOT also has implicit OR between selectors</span>
                                               <span style="font-weight: bold;">:not</span> (<span style="font-weight: bold;">:regexp</span> <span style="font-style: italic;">"moon"</span> <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"planet"</span>)))))
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Groups supply their own section names when none are given</span>
         (<span style="font-weight: bold;">:todo</span> (<span style="font-style: italic;">"SOMEDAY"</span> <span style="font-style: italic;">"TO-READ"</span> <span style="font-style: italic;">"TO-WRITE"</span> <span style="font-style: italic;">"CHECK"</span> <span style="font-style: italic;">"TO-WATCH"</span> <span style="font-style: italic;">"WATCHING"</span>)
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Show this group at the end of the agenda (since it has the</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">highest number). If you specified this group last, items</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">with these todo keywords that e.g. have priority A would be</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">displayed in that group instead, because items are grouped</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">out in the order the groups are listed.</span>
                <span style="font-weight: bold;">:order</span> 9)
         (<span style="font-weight: bold;">:priority&lt;=</span> <span style="font-style: italic;">"B"</span>
                      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Show this section after "Today" and "Important", because</span>
                      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">their order is unspecified, defaulting to 0. Sections</span>
                      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">are displayed lowest-number-first.</span>
                      <span style="font-weight: bold;">:order</span> 1)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">After the last group, the agenda will display items that didn't</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">match any of these groups, with the default order position of 99</span>
         )))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-agenda nil "a")</span>
  )

(<span style="font-weight: bold;">setq</span> spacemacs-theme-org-agenda-height nil
      org-agenda-skip-scheduled-if-done t
      org-agenda-skip-deadline-if-done t
      org-agenda-include-deadlines t
      org-agenda-include-diary t
      org-agenda-block-separator nil
      org-agenda-compact-blocks t
      org-agenda-start-with-log-mode t
      org-habit-following-days 7
      org-habit-preceding-days 10
      org-habit-graph-column 80 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35211;&#20986;&#12375;&#12364;&#38560;&#12428;&#12427;&#12383;&#12417;</span>
      org-habit-show-habits t)

(<span style="font-weight: bold;">setq</span> org-agenda-custom-commands
      '((<span style="font-style: italic;">"z"</span> <span style="font-style: italic;">"Super zaen view"</span>
         ((agenda <span style="font-style: italic;">""</span> ((org-agenda-span 'day)
                      (org-super-agenda-groups
                       '((<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#127959;&#65039;Today"</span>
                                <span style="font-weight: bold;">:time-grid</span> t
                                <span style="font-weight: bold;">:date</span> today
                                <span style="font-weight: bold;">:scheduled</span> today
                                <span style="font-weight: bold;">:order</span> 1)
                         (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#127861;Future"</span>
                                <span style="font-weight: bold;">:deadline</span> future
                                <span style="font-weight: bold;">:scheduled</span> future
                                <span style="font-weight: bold;">:order</span> 10)
                         (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"Overdue"</span>
                                <span style="font-weight: bold;">:deadline</span> past
                                <span style="font-weight: bold;">:order</span> 10)
                         (<span style="font-weight: bold;">:habit</span> t)
                         (<span style="font-weight: bold;">:log</span> t)
                         (<span style="font-weight: bold;">:discard</span> (<span style="font-weight: bold;">:anything</span>))))))
          (alltodo <span style="font-style: italic;">""</span> ((org-agenda-overriding-header <span style="font-style: italic;">""</span>)
                       (org-super-agenda-groups
                        '((<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#9654;&#65039;Work In Progress"</span>
                                 <span style="font-weight: bold;">:todo</span> <span style="font-style: italic;">"WIP"</span>
                                 <span style="font-weight: bold;">:order</span> 1)
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#9997;To write"</span>
                                 <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"Write"</span>
                                 <span style="font-weight: bold;">:order</span> 12)
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#128213;To read"</span>
                                 <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"Read"</span>
                                 <span style="font-weight: bold;">:order</span> 14)
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#9997;Things I Don't Know"</span>
                                 <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"DontKnow"</span>
                                 <span style="font-weight: bold;">:order</span> 15)
                          (<span style="font-weight: bold;">:name</span> <span style="font-style: italic;">"&#128740;&#65039;Train"</span>
                                 <span style="font-weight: bold;">:tag</span> <span style="font-style: italic;">"Train"</span>
                                 <span style="font-weight: bold;">:order</span> 18)
                          (<span style="font-weight: bold;">:discard</span> (<span style="font-weight: bold;">:anything</span> t))))))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2cb5f35" class="outline-2">
<h2 id="org2cb5f35"><span class="section-number-2">4.</span> Pomodoro</h2>
<div class="outline-text-2" id="text-4">
<p>
ポモドーロ用の設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-pomodoro</span>)
(define-key global-map [insert] 'org-pomodoro)

(<span style="font-weight: bold;">setq</span> org-pomodoro-short-break-length 0)
(<span style="font-weight: bold;">setq</span> org-pomodoro-long-break-length 10)
(<span style="font-weight: bold;">setq</span> org-pomodoro-expiry-time 120)

(<span style="font-weight: bold;">setq</span> org-pomodoro-finished-sound <span style="font-style: italic;">"~/.emacs.d/resources/pmd-finished.wav"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-pomodoro-finished)</span>
(<span style="font-weight: bold;">setq</span> org-pomodoro-short-break-sound <span style="font-style: italic;">"~/.emacs.d/resources/pmd-short-break.wav"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-pomodoro-short-break-finished)</span>

(add-hook 'org-pomodoro-short-break-finished-hook 'org-agenda-default)
(add-hook 'org-pomodoro-long-break-finished-hook 'org-agenda-default)

(<span style="font-weight: bold;">setq</span> org-clock-mode-line-total 'today)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/org-pomodoro-remain-gauge</span> (max-minutes)
  <span style="font-style: italic;">"Display remain time gauge."</span>
  (<span style="font-weight: bold;">let*</span> ((display-len 25)
         (remaining-minutes (/ (org-pomodoro-remaining-seconds) 60))
         (current-percent (/ remaining-minutes max-minutes))
         (done (truncate (* (- 1 current-percent) display-len)))
         (will (truncate (* current-percent display-len))))
    (concat
     <span style="font-style: italic;">"%{T2}"</span>
     <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(concat "%{F#008000}" (make-string done ?&#9608;) "%{F-}")</span>
     (concat <span style="font-style: italic;">"%{F#008000}"</span> (make-string done ?|) <span style="font-style: italic;">"%{F-}"</span>)
     (concat <span style="font-style: italic;">"%{F#413839}"</span> (make-string will ?|) <span style="font-style: italic;">"%{F-}"</span>)
     <span style="font-style: italic;">"%{T-}"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://colekillian.com/posts/org-pomodoro-and-polybar/</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/org-pomodoro-time</span> ()
  <span style="font-style: italic;">"Return the remaining pomodoro time. Function for displaying in Polybar."</span>
  (<span style="font-weight: bold;">cond</span>
   ((org-pomodoro-active-p) (<span style="font-weight: bold;">cl-case</span> org-pomodoro-state
                              (<span style="font-weight: bold;">:pomodoro</span>
                               (format <span style="font-style: italic;">"%s %dm %s%s%s"</span>
                                       (kd/org-pomodoro-remain-gauge org-pomodoro-length)
                                       (/ (org-pomodoro-remaining-seconds) 60)
                                       <span style="font-style: italic;">"%{F#000000}"</span>
                                       org-clock-heading
                                       <span style="font-style: italic;">"%{F-}"</span>
                                       ))
                              (<span style="font-weight: bold;">:short-break</span>
                               (format <span style="font-style: italic;">"%s &#61476;Short break: %dm"</span>
                                       (kd/org-pomodoro-remain-gauge org-pomodoro-short-break-length)
                                       (/ (org-pomodoro-remaining-seconds) 60)))
                              (<span style="font-weight: bold;">:long-break</span>
                               (format <span style="font-style: italic;">"%s &#61476;Long break: %dm"</span>
                                       (kd/org-pomodoro-remain-gauge org-pomodoro-long-break-length)
                                       (/ (org-pomodoro-remaining-seconds) 60)))
                              (<span style="font-weight: bold;">:overtime</span>
                               (format <span style="font-style: italic;">"&#61561;Overtime! %dm"</span> (/ (org-pomodoro-remaining-seconds) 60)))
                              ))
   ((org-clocking-p) (format <span style="font-style: italic;">"(%s) %s"</span> (org-clock-get-clocked-time) org-clock-heading))
   (t <span style="font-style: italic;">"Not working..."</span>)))
(kd/org-pomodoro-time)

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">kd/pmd-today-point</span> 0)
(add-hook 'org-pomodoro-finished-hook
          (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">setq</span> kd/pmd-today-point (1+ kd/pmd-today-point))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/write-pmd</span> (str)
  (shell-command (format <span style="font-style: italic;">"echo '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">' &gt;&gt; ~/roam/pmd.csv"</span> str)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">reset point</span>
(run-at-time <span style="font-style: italic;">"23:59pm"</span> (* 24 60 60) (<span style="font-weight: bold;">lambda</span> ()
                                      (<span style="font-weight: bold;">when</span> (&gt; kd/pmd-today-point 0)
                                        (kd/write-pmd (concat (format-time-string <span style="font-style: italic;">"%Y-%m-%d"</span>)
                                                              <span style="font-style: italic;">", "</span>
                                                              (number-to-string kd/pmd-today-point)))
                                        (<span style="font-weight: bold;">setq</span> kd/pmd-today-point 0)
                                        (message <span style="font-style: italic;">"pomodoro count reset!"</span>))))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/pmd-today-point-display</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(format " [%s]" kd/pmd-today-point)</span>
  (<span style="font-weight: bold;">let*</span> ((all-minute (* kd/pmd-today-point 25))
         (hour (/ all-minute 60))
         (minute (% all-minute 60)))
    (format <span style="font-style: italic;">" &#61874;%spts/%02dh%02dm"</span> kd/pmd-today-point hour minute)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/pmd-manual</span> ()
  <span style="font-style: italic;">"set point"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((point (read-from-minibuffer <span style="font-style: italic;">"How much point? "</span>)))
    (<span style="font-weight: bold;">setq</span> kd/pmd-today-point (string-to-number point))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org75700ba" class="outline-2">
<h2 id="org75700ba"><span class="section-number-2">5.</span> Font</h2>
<div class="outline-text-2" id="text-5">
<p>
フォント設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(defvar efs/frame-transparency '(90 . 90))</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(set-frame-parameter (selected-frame) 'alpha efs/frame-transparency)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'default-frame-alist `(alpha . ,efs/frame-transparency))</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Set the font face based on platform</span>
(<span style="font-weight: bold;">when</span> window-system
  (<span style="font-weight: bold;">progn</span>
    (<span style="font-weight: bold;">pcase</span> system-type
      ((<span style="font-weight: bold;">or</span> 'gnu/linux 'windows-nt 'cygwin)
       (set-face-attribute 'default nil
                           <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"Fira Code"</span>
                           <span style="font-weight: bold;">:weight</span> 'regular
                           <span style="font-weight: bold;">:height</span> 100)
       (set-fontset-font
        nil 'japanese-jisx0208
        (font-spec <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Hiragino Sans"</span>)))
      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Mac</span>
      ('darwin
       (set-face-attribute 'default nil
                           <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"Fira Mono"</span>
                           <span style="font-weight: bold;">:height</span> 150)
       (set-fontset-font
        nil 'japanese-jisx0208
        (font-spec <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Hiragino Sans"</span>))))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"JetBrains Mono"</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Iosevka SS08"</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Fira Mono"</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Fira Code"</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Hiragino Sans" -- (japanese)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Hack"</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25991;&#23383;&#12467;&#12540;&#12489; ================</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12479;&#12540;&#12511;&#12490;&#12523;&#12398;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(set-terminal-coding-system 'utf-8)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12461;&#12540;&#12508;&#12540;&#12489;&#12363;&#12425;&#20837;&#21147;&#12373;&#12428;&#12427;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(set-keyboard-coding-system 'utf-8)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12501;&#12449;&#12452;&#12523;&#12398;&#12496;&#12483;&#12501;&#12449;&#12398;&#12487;&#12501;&#12457;&#12523;&#12488;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(set-buffer-file-coding-system 'utf-8)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12496;&#12483;&#12501;&#12449;&#12398;&#12503;&#12525;&#12475;&#12473;&#12398;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(<span style="font-weight: bold;">setq</span> default-buffer-file-coding-system 'utf-8)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12501;&#12449;&#12452;&#12523;&#12398;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(<span style="font-weight: bold;">setq</span> file-name-coding-system 'utf-8)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#26032;&#35215;&#20316;&#25104;&#12501;&#12449;&#12452;&#12523;&#12398;&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(set-default-coding-systems 'utf-8)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#32117;&#25991;&#23383;&#12501;&#12457;&#12531;&#12488; ================</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">--set-emoji-font</span> (frame)
  <span style="font-style: italic;">"Adjust the font settings of FRAME so Emacs can display emoji properly."</span>
  (<span style="font-weight: bold;">if</span> (eq system-type 'darwin)
      <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">For NS/Cocoa</span>
      (set-fontset-font t 'symbol (font-spec <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Apple Color Emoji"</span>) frame 'prepend)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">For Linux</span>
    (set-fontset-font t 'symbol (font-spec <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Symbola"</span>) frame 'prepend)))

(<span style="font-weight: bold;">when</span> window-system
  (<span style="font-weight: bold;">progn</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">GUI&#29992;&#35373;&#23450;</span>
    (--set-emoji-font nil)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Hook for when a frame is created with emacsclient</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">see https://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Frames.html</span>
    (add-hook 'after-make-frame-functions '--set-emoji-font)

    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">unicodefont</span>
    (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">unicode-fonts</span>)
    (unicode-fonts-setup)))

(<span style="font-weight: bold;">when</span> (not window-system)
  (<span style="font-weight: bold;">progn</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CUI&#29992;&#35373;&#23450;</span>
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1eb2216" class="outline-2">
<h2 id="org1eb2216"><span class="section-number-2">6.</span> Simple</h2>
<div class="outline-text-2" id="text-6">
<p>
未分類の設定。最初から入っているものの設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25991;&#23383;&#12467;&#12540;&#12489;</span>
(prefer-coding-system 'utf-8)
(set-language-environment 'utf-8)

(server-start)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#34920;&#31034;&#31995; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">*scratch*&#12391;&#26368;&#21021;&#12395;&#25551;&#30011;&#12373;&#12428;&#12427;&#12513;&#12483;&#12475;&#12540;&#12472;&#12434;&#28040;&#12377;</span>
(<span style="font-weight: bold;">setq</span> initial-scratch-message <span style="font-style: italic;">""</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#32066;&#20102;&#26178;&#12395;&#30906;&#35469;&#12375;&#12394;&#12356;</span>
(<span style="font-weight: bold;">setq</span> confirm-kill-processes nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12513;&#12491;&#12517;&#12540;&#12496;&#12540;&#12434;&#28040;&#12377;</span>
(menu-bar-mode 0)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23550;&#24540;&#12377;&#12427;&#25324;&#24359;&#12434;&#12495;&#12452;&#12521;&#12452;&#12488;</span>
(show-paren-mode t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36215;&#21205;&#26178;&#12398;&#12513;&#12483;&#12475;&#12540;&#12472;&#38750;&#34920;&#31034;</span>
(<span style="font-weight: bold;">setq</span> inhibit-startup-message t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20445;&#23384;&#26178;&#12398;message&#38750;&#34920;&#31034;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq save-silently t)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">font-lock&#12434;&#12393;&#12371;&#12391;&#12418;&#26377;&#21177;&#12395;&#12377;&#12427;</span>
(global-font-lock-mode t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12479;&#12452;&#12488;&#12523;&#12395;&#12501;&#12523;&#12497;&#12473;&#34920;&#31034;</span>
(<span style="font-weight: bold;">setq</span> frame-title-format <span style="font-style: italic;">"%f"</span>)

(<span style="font-weight: bold;">setq</span> ring-bell-function 'ignore)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">scroll-bar</span>)
(scroll-bar-mode 0)
(show-paren-mode t)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">tool-bar</span>)
(tool-bar-mode 0)
(tooltip-mode 0)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12461;&#12540;&#12496;&#12452;&#12531;&#12489; ================</span>

(global-set-key (kbd <span style="font-style: italic;">"M-n"</span>) (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (scroll-up 1)))
(global-set-key (kbd <span style="font-style: italic;">"M-p"</span>) (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (scroll-down 1)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12461;&#12540;&#12508;&#12540;&#12489;&#20837;&#12428;&#26367;&#12360;&#12540;&#12540;&#12496;&#12483;&#12463;&#12473;&#12506;&#12540;&#12473;&#12434;C-h&#12391;&#12290;</span>
(keyboard-translate ?\C-h ?\C-?)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12527;&#12540;&#12489;&#12459;&#12454;&#12531;&#12488;&#12434;C-x p &#12395;&#21106;&#24403;</span>
(global-set-key <span style="font-style: italic;">"\C-xp"</span> 'count-words)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">window&#12398;&#22823;&#12365;&#12373;&#22793;&#26356;</span>
(global-set-key (kbd <span style="font-style: italic;">"C-M-{"</span>) 'shrink-window-horizontally)
(global-set-key (kbd <span style="font-style: italic;">"C-M-}"</span>) 'enlarge-window-horizontally)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">yes&#12363;no&#12391;&#12399;&#12394;&#12367;&#12289;y&#12363;n&#12363;&#12391;&#31572;&#12360;&#12425;&#12428;&#12427;&#12424;&#12358;&#12395;&#12377;&#12427;</span>
(<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">yes-or-no-p</span> 'y-or-n-p)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#32066;&#20102;&#12375;&#12390;&#12375;&#12414;&#12358;&#20107;&#25925;&#38450;&#27490;</span>
(<span style="font-weight: bold;">setq</span> confirm-kill-emacs 'y-or-n-p)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12522;&#12531;&#12463;&#12434;&#32862;&#12363;&#12378;&#12395;&#38283;&#12367;</span>
(<span style="font-weight: bold;">setq</span> vc-follow-symlinks t)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#25324;&#24359;&#12398;&#35036;&#23436;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">smartparens</span>)
(add-hook 'prog-mode-hook 'smartparens-mode)
(add-hook 'eshell-mode-hook 'smartparens-mode)
(add-hook 'org-mode-hook 'smartparens-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12458;&#12540;&#12488;&#12475;&#12540;&#12502;&#38306;&#36899; ================</span>

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12525;&#12464;&#12398;&#35352;&#37682;&#37327;</span>
(<span style="font-weight: bold;">setq</span> message-log-max 1000)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#23653;&#27508;&#23384;&#25968;</span>
(<span style="font-weight: bold;">setq</span> history-length 500)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#37325;&#35079;&#12377;&#12427;&#23653;&#27508;&#12399;&#20445;&#23384;&#12375;&#12394;&#12356;</span>
(<span style="font-weight: bold;">setq</span> history-delete-duplicates t)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#12496;&#12483;&#12463;&#12450;&#12483;&#12503;&#12501;&#12449;&#12452;&#12523;&#12434;&#20316;&#12425;&#12394;&#12356;</span>
(<span style="font-weight: bold;">setq</span> backup-inhibited t)
(<span style="font-weight: bold;">setq</span> make-backup-files nil)
(<span style="font-weight: bold;">setq</span> auto-save-default nil)
(<span style="font-weight: bold;">setq</span> create-lockfiles nil)

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#32066;&#20102;&#26178;&#12395;&#12458;&#12540;&#12488;&#12475;&#12540;&#12502;&#12501;&#12449;&#12452;&#12523;&#12434;&#21066;&#38500;</span>
(<span style="font-weight: bold;">setq</span> delete-auto-save-files t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12458;&#12540;&#12488;&#12475;&#12540;&#12502;</span>
(<span style="font-weight: bold;">setq</span> auto-save-timeout 2)
(<span style="font-weight: bold;">setq</span> auto-save-visited-interval 2)
(<span style="font-weight: bold;">setq</span> auto-save-no-message t)
(auto-save-visited-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#26368;&#36969;&#21270; ================</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#21491;&#12363;&#12425;&#24038;&#12395;&#35501;&#12416;&#35328;&#35486;&#12395;&#23550;&#24540;&#12373;&#12379;&#12394;&#12356;&#12371;&#12392;&#12391;&#25551;&#30011;&#39640;&#36895;&#21270;</span>
(<span style="font-weight: bold;">setq-default</span> bidi-display-reordering nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">splash screen&#12434;&#28961;&#21177;&#12395;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> inhibit-splash-screen t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#34892;&#30058;&#21495;&#12398;&#34920;&#31034;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(display-line-numbers-mode)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12484;&#12540;&#12523;&#31995; ================</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ediff&#12434;&#65297;&#12454;&#12451;&#12531;&#12489;&#12454;&#12391;&#34920;&#31034;</span>
(<span style="font-weight: bold;">setq</span> ediff-window-setup-function 'ediff-setup-windows-plain)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12540;&#12487;&#12451;&#12531;&#12464; ================</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12458;&#12540;&#12488;&#12452;&#12531;&#12487;&#12531;&#12488;&#12391;&#12473;&#12506;&#12540;&#12473;&#12434;&#20351;&#12358;</span>
(<span style="font-weight: bold;">setq-default</span> indent-tabs-mode nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12463;&#12522;&#12483;&#12503;&#12508;&#12540;&#12489;&#12392;&#21516;&#26399;</span>
(<span style="font-weight: bold;">setq</span> x-select-enable-primary t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#31354;&#30333;&#12434;&#33258;&#21205;&#21066;&#38500;</span>
(add-hook 'before-save-hook 'delete-trailing-whitespace)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36984;&#25246;&#29366;&#24907;&#12391;&#20837;&#21147;&#12377;&#12427;&#12392;&#19978;&#26360;&#12365;</span>
(delete-selection-mode t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12454;&#12451;&#12531;&#12489;&#12454;&#31227;&#21205; ================</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12513;&#12472;&#12515;&#12540;&#12514;&#12540;&#12489;&#12398;C-t&#12461;&#12540;&#12496;&#12452;&#12531;&#12489;&#12434;&#28961;&#21177;&#21270;&#12377;&#12427;</span>
(eval-after-load <span style="font-style: italic;">"django-mode"</span>
  '(progn
     (define-key django-mode-map (kbd <span style="font-style: italic;">"C-t"</span>) nil)))
(eval-after-load <span style="font-style: italic;">"dired"</span>
  '(progn
     (define-key dired-mode-map (kbd <span style="font-style: italic;">"C-t"</span>) nil)))
(eval-after-load <span style="font-style: italic;">"vterm"</span>
  '(progn
     (define-key vterm-mode-map (kbd <span style="font-style: italic;">"C-t"</span>) nil)
     (define-key vterm-mode-map (kbd <span style="font-style: italic;">"M-&lt;right&gt;"</span>) nil)
     (define-key vterm-mode-map (kbd <span style="font-style: italic;">"M-&lt;left&gt;"</span>) nil)
     (define-key vterm-mode-map (kbd <span style="font-style: italic;">"&lt;f9&gt;"</span>) nil)
     (define-key vterm-mode-map (kbd <span style="font-style: italic;">"C-&lt;f9&gt;"</span>) nil)))
(eval-after-load <span style="font-style: italic;">"magit"</span>
  '(progn
     (mapc (<span style="font-weight: bold;">lambda</span> (i)
             (define-key magit-mode-map (kbd (format <span style="font-style: italic;">"M-%d"</span> i)) nil))
           (number-sequence 1 4))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12452;&#12531;&#12463;&#12522;&#12513;&#12531;&#12479;&#12523;&#12469;&#12540;&#12481;&#12398;&#25369;&#21205;&#22793;&#26356; ================</span>

(<span style="font-weight: bold;">defadvice</span> <span style="font-weight: bold;">isearch-mode</span> (around isearch-mode-default-string (forward <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> regexp op-fun recursive-edit word-p) activate)
  (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> transient-mark-mode mark-active (not (eq (mark) (point))))
      (<span style="font-weight: bold;">progn</span>
        (isearch-update-ring (buffer-substring-no-properties (mark) (point)))
        (deactivate-mark)
        ad-do-it
        (<span style="font-weight: bold;">if</span> (not forward)
            (isearch-repeat-backward)
          (goto-char (mark))
          (isearch-repeat-forward)))
    ad-do-it))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12510;&#12454;&#12473;&#12507;&#12452;&#12540;&#12523;&#12398;&#25369;&#21205;</span>
(<span style="font-weight: bold;">setq</span>
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12507;&#12452;&#12540;&#12523;&#12391;&#12473;&#12463;&#12525;&#12540;&#12523;&#12377;&#12427;&#34892;&#25968;&#12434;&#35373;&#23450;</span>
 mouse-wheel-scroll-amount '(1 ((shift) . 2) ((control)))
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36895;&#24230;&#12434;&#28961;&#35222;&#12377;&#12427;</span>
 mouse-wheel-progressive-speed nil)
(<span style="font-weight: bold;">setq</span> scroll-preserve-screen-position 'always)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">turn off blink cursor</span>
(<span style="font-weight: bold;">if</span> (fboundp 'blink-cursor-mode)
    (blink-cursor-mode -1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga7dad95" class="outline-2">
<h2 id="orga7dad95"><span class="section-number-2">7.</span> Packages</h2>
<div class="outline-text-2" id="text-7">
<p>
未分類の設定。拡張設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>全設定</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23653;&#27508;&#20445;&#23384;</span>
(savehist-mode 1)
<span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">&#27704;&#32154;&#21270;&#12377;&#12427;&#22793;&#25968;&#12434;&#26032;&#12383;&#12395;&#36861;&#21152;&#12377;&#12427;</span>
(<span style="font-weight: bold;">push</span> 'compile-command savehist-additional-variables)
<span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">&#27704;&#32154;&#21270;&#12375;&#12394;&#12356;&#12511;&#12491;&#12496;&#12483;&#12501;&#12449;&#23653;&#27508;&#12398;&#22793;&#25968;&#12434;&#36861;&#21152;&#12377;&#12427;</span>
(<span style="font-weight: bold;">push</span> 'command-history savehist-ignored-variables)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12540;&#12487;&#12451;&#12531;&#12464;&#22806;&#35251;  ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rainbow-delimiters</span>)
(rainbow-delimiters-mode t)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'cl-lib)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'color)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(cl-loop</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">for index from 1 to rainbow-delimiters-max-face-count</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">do</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">(let ((face (intern (format "rainbow-delimiters-depth-%d-face" index))))</span>
<span style="font-weight: bold; font-style: italic;">;;    </span><span style="font-weight: bold; font-style: italic;">(cl-callf color-saturate-name (face-foreground face) 30)))</span>

(add-hook 'prog-mode-hook 'rainbow-delimiters-mode)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">auto-highlight-symbol</span>)
(global-auto-highlight-symbol-mode t)
(ahs-set-idle-interval 0.4)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ahs-mode&#12398;&#12461;&#12540;&#12496;&#12452;&#12531;&#12489;&#12434;&#28961;&#21177;&#21270;&#12377;&#12427;</span>
(define-key auto-highlight-symbol-mode-map (kbd <span style="font-style: italic;">"M-&lt;right&gt;"</span>) nil)
(define-key auto-highlight-symbol-mode-map (kbd <span style="font-style: italic;">"M-&lt;left&gt;"</span>) nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12452;&#12531;&#12487;&#12531;&#12488;&#21487;&#35222;&#21270;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'highlight-indentation)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'prog-mode-hook 'highlight-indentation-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(set-face-background 'highlight-indentation-face "#e3e3d3")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(set-face-background 'highlight-indentation-current-column-face "#c3b3b3")</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12506;&#12540;&#12473;&#21487;&#35222;&#21270;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">whitespace</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#31354;&#30333;</span>
(set-face-foreground 'whitespace-space nil)
(set-face-background 'whitespace-space <span style="font-style: italic;">"gray33"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12501;&#12449;&#12452;&#12523;&#20808;&#38957;&#12392;&#26411;&#23614;&#12398;&#31354;&#34892;</span>
(set-face-background 'whitespace-empty <span style="font-style: italic;">"gray33"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12479;&#12502;</span>
(set-face-foreground 'whitespace-tab nil)
(set-face-background 'whitespace-tab <span style="font-style: italic;">"gray33"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">???</span>
(set-face-background 'whitespace-trailing <span style="font-style: italic;">"gray33"</span>)
(set-face-background 'whitespace-hspace <span style="font-style: italic;">"gray33"</span>)
(<span style="font-weight: bold;">setq</span> whitespace-style '(face           <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">face&#12391;&#21487;&#35222;&#21270;</span>
                         trailing       <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">&#34892;&#26411;</span>
                         tabs           <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">&#12479;&#12502;</span>
                         empty          <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">&#20808;&#38957;/&#26411;&#23614;&#12398;&#31354;&#34892;</span>
                         spaces         <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">&#31354;&#30333;</span>
                         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">space-mark     ; &#34920;&#31034;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;</span>
                         tab-mark))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12506;&#12540;&#12473;&#12399;&#20840;&#35282;&#12398;&#12415;&#12434;&#21487;&#35222;&#21270;</span>
(<span style="font-weight: bold;">setq</span> whitespace-space-regexp <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\u3000+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12479;&#12502;&#12398;&#34920;&#31034;&#12434;&#22793;&#26356;</span>
(<span style="font-weight: bold;">setq</span> whitespace-display-mappings
      '((tab-mark ?\t [?\xBB ?\t])))
(global-whitespace-mode 1)

(add-hook 'emacs-lisp-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (<span style="font-weight: bold;">setq</span> indent-tabs-mode nil)))

(<span style="font-weight: bold;">setq-default</span> typescript-indent-level 2)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#22806;&#35251;(&#38750;&#12467;&#12540;&#12487;&#12451;&#12531;&#12464;) ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#29694;&#22312;&#34892;&#12434;&#12495;&#12452;&#12521;&#12452;&#12488;</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12495;&#12452;&#12521;&#12452;&#12488;&#12398;&#34920;&#31034;&#12434;&#36933;&#12367;&#12375;&#12390;&#39640;&#36895;&#21270;&#12377;&#12427;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">hl-line</span>)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">global-hl-line-timer-function</span> ()
  (global-hl-line-unhighlight-all)
  (<span style="font-weight: bold;">let</span> ((global-hl-line-mode t))
    (global-hl-line-highlight)))
(<span style="font-weight: bold;">setq</span> global-hl-line-timer
      (run-with-idle-timer 0.03 t 'global-hl-line-timer-function))

(<span style="font-weight: bold;">defface</span> <span style="font-weight: bold; font-style: italic;">hlline-face</span>
  '((((class color)
      (background dark))
     (<span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"DodgerBlue4"</span>))
    (((class color)
      (background light))
     (<span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"gainsboro"</span>))
    (t
     ()))
  <span style="font-style: italic;">"*Face used by hl-line."</span>)

(<span style="font-weight: bold;">setq</span> hl-line-face 'hlline-face)
(global-hl-line-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(nyan-mode)</span>

(<span style="font-weight: bold;">setq</span> beacon-size 20) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">default 40</span>
(<span style="font-weight: bold;">setq</span> beacon-color <span style="font-style: italic;">"#827591"</span>)
(<span style="font-weight: bold;">setq</span> beacon-blink-when-focused t)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(beacon-mode)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">window&#31227;&#21205; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20998;&#21106;&#12375;&#12383;&#30011;&#38754;&#38291;&#12434;Shift+&#30690;&#21360;&#12391;&#31227;&#21205;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq windmove-wrap-around t)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(windmove-mode 0)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(window-numbering-mode 1)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">window&#34920;&#31034; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'popwin)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(popwin-mode 0)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12502;&#12483;&#12463;&#12510;&#12540;&#12463; ================</span>
(<span style="font-weight: bold;">setq-default</span> bm-buffer-persistence nil)
(<span style="font-weight: bold;">setq</span> bm-restore-repository-on-load t)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">bm</span>)
(add-hook 'find-file-hook 'bm-buffer-restore)
(add-hook 'kill-buffer-hook 'bm-buffer-save)
(add-hook 'after-save-hook 'bm-buffer-save)
(add-hook 'after-revert-hook 'bm-buffer-restore)
(add-hook 'vc-before-checkin-hook 'bm-buffer-save)
(add-hook 'kill-emacs-hook '(lambda nil
                              (bm-buffer-save-all)
                              (bm-repository-save)))
(global-set-key (kbd <span style="font-style: italic;">"C-M-SPC"</span>) 'bm-toggle)
(global-set-key (kbd <span style="font-style: italic;">"M-["</span>) 'bm-previous)
(global-set-key (kbd <span style="font-style: italic;">"M-]"</span>) 'bm-next)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12459;&#12540;&#12477;&#12523;&#31227;&#21205; ================</span>
(global-set-key (kbd <span style="font-style: italic;">"M-&lt;left&gt;"</span>) 'previous-buffer)
(global-set-key (kbd <span style="font-style: italic;">"M-&lt;right&gt;"</span>) 'next-buffer)
(global-set-key (kbd <span style="font-style: italic;">"C-t"</span>) 'other-window)
(global-set-key (kbd <span style="font-style: italic;">"M-t"</span>) (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (other-window -1)))

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ace-jump-mode</span>)
(<span style="font-weight: bold;">setq</span> ace-jump-mode-gray-background nil)
(<span style="font-weight: bold;">setq</span> ace-jump-word-mode-use-query-char nil)
(<span style="font-weight: bold;">setq</span> ace-jump-mode-move-keys
      (append <span style="font-style: italic;">"asdfghjkl;:]qwertyuiop@zxcvbnm,."</span> nil))
(global-set-key (kbd <span style="font-style: italic;">"C-o"</span>) 'ace-jump-word-mode)

(ace-link-setup-default)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">avy</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-j"</span>) 'avy-copy-line)
(global-set-key (kbd <span style="font-style: italic;">"M-j"</span>) 'avy-goto-line)
(global-set-key (kbd <span style="font-style: italic;">"C-M-j"</span>) 'avy-goto-whitespace-end)

(back-button-mode 1)
(global-set-key (kbd <span style="font-style: italic;">"C-c &lt;left&gt;"</span>) 'goto-last-change)
(global-set-key (kbd <span style="font-style: italic;">"C-c &lt;right&gt;"</span>) 'goto-last-change-reverse)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#30697;&#24418;&#36984;&#25246;&#12391;&#20351;&#12358;&#12383;&#12417;&#28961;&#21177;&#21270;&#12377;&#12427;</span>
(define-key back-button-mode-map (kbd <span style="font-style: italic;">"C-x SPC"</span>) nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12452;&#12531;&#12463;&#12522;&#12513;&#12531;&#12479;&#12523;&#12469;&#12540;&#12481; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">migemo</span>)
(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (executable-find <span style="font-style: italic;">"cmigemo"</span>)
           (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">migemo</span> nil t))
  (<span style="font-weight: bold;">setq</span> migemo-command my-migemo-command)
  (<span style="font-weight: bold;">setq</span> migemo-options '(<span style="font-style: italic;">"-q"</span> <span style="font-style: italic;">"--emacs"</span>))
  (<span style="font-weight: bold;">setq</span> migemo-dictionary my-migemo-dictionary)
  (<span style="font-weight: bold;">setq</span> migemo-user-dictionary nil)
  (<span style="font-weight: bold;">setq</span> migemo-regex-dictionary nil)
  (<span style="font-weight: bold;">setq</span> migemo-coding-system 'utf-8-unix)
  (load-library <span style="font-style: italic;">"migemo"</span>)
  (migemo-init)
  )

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">anzu</span>)
(global-anzu-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12496;&#12540;&#12472;&#12519;&#12531;&#31649;&#29702; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">magit</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-x g"</span>) 'magit-status)

(<span style="font-weight: bold;">with-eval-after-load</span> 'magit
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">forge</span>))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Git&#12398;&#24046;&#20998;&#12434;&#34920;&#31034;&#12377;&#12427;</span>
(global-git-gutter+-mode 1)
(global-set-key (kbd <span style="font-style: italic;">"C-c C-v"</span>) 'git-gutter+-show-hunk-inline-at-point)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">http://www.modernemacs.com/post/pretty-magit/</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/magit-commit-prompt</span> ()
  <span style="font-style: italic;">"Use ivy to insert conventional commit keyword."</span>
  (<span style="font-weight: bold;">let</span> ((conventional-prompt '((<span style="font-style: italic;">"build"</span> <span style="font-style: italic;">"&#12499;&#12523;&#12489;"</span>)
                               (<span style="font-style: italic;">"chore"</span> <span style="font-style: italic;">"&#38609;&#20107;, &#12459;&#12486;&#12468;&#12521;&#12452;&#12474;&#12377;&#12427;&#24517;&#35201;&#12394;&#12356;&#12424;&#12358;&#12394;&#12418;&#12398;"</span>)
                               (<span style="font-style: italic;">"ci"</span> <span style="font-style: italic;">"CI"</span>)
                               (<span style="font-style: italic;">"docs"</span> <span style="font-style: italic;">"&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;"</span>)
                               (<span style="font-style: italic;">"feat"</span> <span style="font-style: italic;">"&#26032;&#27231;&#33021;"</span>)
                               (<span style="font-style: italic;">"fix"</span> <span style="font-style: italic;">"&#12496;&#12464;&#12501;&#12451;&#12483;&#12463;&#12473;"</span>)
                               (<span style="font-style: italic;">"perf"</span> <span style="font-style: italic;">"&#12497;&#12501;&#12457;&#12540;&#12510;&#12531;&#12473;"</span>)
                               (<span style="font-style: italic;">"refactor"</span> <span style="font-style: italic;">"&#12522;&#12501;&#12449;&#12463;&#12479;&#12522;&#12531;&#12464;"</span>)
                               (<span style="font-style: italic;">"revert"</span> <span style="font-style: italic;">"&#12467;&#12511;&#12483;&#12488;&#21462;&#12426;&#28040;&#12375;"</span>)
                               (<span style="font-style: italic;">"style"</span> <span style="font-style: italic;">"&#12467;&#12540;&#12489;&#12473;&#12479;&#12452;&#12523;&#20462;&#27491;"</span>)
                               (<span style="font-style: italic;">"test"</span> <span style="font-style: italic;">"&#12486;&#12473;&#12488;"</span>))))
    (insert (concat (ivy-read <span style="font-style: italic;">"Commit Type "</span>
                              (mapcar 'car conventional-prompt)
                              <span style="font-weight: bold;">:require-match</span> t
                              <span style="font-weight: bold;">:sort</span> t
                              <span style="font-weight: bold;">:preselect</span> <span style="font-style: italic;">"Add: "</span>)
                    <span style="font-style: italic;">": "</span>))))

(remove-hook 'git-commit-setup-hook 'with-editor-usage-message)
(add-hook 'git-commit-setup-hook 'kd/magit-commit-prompt)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25991;&#23383;&#20837;&#21147; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">mozc</span>)
(set-language-environment <span style="font-style: italic;">"Japanese"</span>)
(<span style="font-weight: bold;">setq</span> default-input-method <span style="font-style: italic;">"japanese-mozc"</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-SPC"</span>) 'toggle-input-method)

(add-hook 'input-method-activate-hook
          (<span style="font-weight: bold;">lambda</span>() (set-cursor-color <span style="font-style: italic;">"Magenta"</span>)))
(add-hook 'input-method-inactivate-hook
          (<span style="font-weight: bold;">lambda</span>() (set-cursor-color <span style="font-style: italic;">"grey"</span>)))

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">mozc-popup</span>)
(<span style="font-weight: bold;">setq</span> mozc-candidate-style 'echo-area)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#22266;&#26377;&#12469;&#12452;&#12488;&#12514;&#12540;&#12489; ================</span>
(global-set-key (kbd <span style="font-style: italic;">"&lt;f2&gt;"</span>) 'devdocs-search)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12531;&#12477;&#12540;&#12523;&#12514;&#12540;&#12489; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">fish-mode</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12486;&#12531;&#12503;&#12524;&#12540;&#12488; ================</span>
(auto-insert-mode)
(<span style="font-weight: bold;">setq</span> auto-insert-directory <span style="font-style: italic;">"~/.emacs.d/insert/"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-auto-insert "\\.rb$" "ruby-template.rb")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-auto-insert "\\.md$" "markdown-template.rb")</span>
(<span style="font-weight: bold;">setq</span> auto-insert-alist
      (append '(
                (<span style="font-style: italic;">"\\.rb$"</span> . <span style="font-style: italic;">"ruby-template.rb"</span>)
                (<span style="font-style: italic;">"\\.js$"</span> . <span style="font-style: italic;">"js-template.js"</span>)
                (<span style="font-style: italic;">"\\.org$"</span> . <span style="font-style: italic;">"org-template.org"</span>)
                (<span style="font-style: italic;">"\\.md$"</span> . <span style="font-style: italic;">"markdown-template.md"</span>)
                ) <span style="font-weight: bold;">auto-insert-alist))</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">yasnippet</span>)
(add-to-list 'yas-snippet-dirs <span style="font-style: italic;">"~/.emacs.d/snippets"</span>)
(auto-insert-mode t)
(yas-global-mode t)
(<span style="font-weight: bold;">setq</span> yas-prompt-functions '(yas-ido-prompt))

(define-key yas-minor-mode-map (kbd <span style="font-style: italic;">"C-x y i"</span>) 'yas-insert-snippet)
(define-key yas-minor-mode-map (kbd <span style="font-style: italic;">"C-x y n"</span>) 'yas-new-snippet)
(define-key yas-minor-mode-map (kbd <span style="font-style: italic;">"C-x y v"</span>) 'yas-visit-snippet-file)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12503;&#12525;&#12472;&#12455;&#12463;&#12488; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">projectile</span>)
(projectile-global-mode)
(define-key projectile-mode-map (kbd <span style="font-style: italic;">"C-c p"</span>) 'projectile-command-map)
(counsel-projectile-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20877;&#35501;&#36796; ================</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">revert-buffer-no-confirm</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> force-reverting)
  <span style="font-style: italic;">"Interactive call to revert-buffer. Ignoring the auto-save</span>
<span style="font-style: italic;"> file and not requesting for confirmation. When the current buffer</span>
<span style="font-style: italic;"> is modified, the command refuses to revert it, unless you specify</span>
<span style="font-style: italic;"> the optional argument: force-reverting to true."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(message "force-reverting value is %s" force-reverting)</span>
  (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">or</span> force-reverting (not (buffer-modified-p)))
      (revert-buffer <span style="font-weight: bold;">:ignore-auto</span> <span style="font-weight: bold;">:noconfirm</span>)
    (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"The buffer has been modified"</span>)))

(global-set-key (kbd <span style="font-style: italic;">"&lt;f5&gt;"</span>) 'revert-buffer-no-confirm)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#22793;&#26356;&#12364;&#12354;&#12387;&#12383;&#12425;&#33258;&#21205;&#12391;&#26356;&#26032;</span>
(global-auto-revert-mode 1)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">SSH ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">tramp</span>)
(<span style="font-weight: bold;">setq</span> tramp-default-method <span style="font-style: italic;">"ssh"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12506;&#12523;&#12481;&#12455;&#12483;&#12463; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'prog-mode-hook 'flyspell-mode)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ispell &#12398;&#24460;&#32153;&#12391;&#12354;&#12427; aspell &#12434;&#20351;&#12358;&#12290;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CamelCase &#12391;&#12418;&#12356;&#12356;&#24863;&#12376;&#12395; spellcheck &#12375;&#12390;&#12367;&#12428;&#12427;&#35373;&#23450;&#12434;&#36861;&#21152;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">See: https://stackoverflow.com/a/24878128/8888451</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq-default ispell-program-name "aspell")</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(eval-after-load "ispell"</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">'(add-to-list 'ispell-skip-region-alist '("[</span><span style="font-weight: bold; font-style: italic;">^</span><span style="font-weight: bold; font-style: italic;">\000-\377]+")))</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq ispell-program-name "aspell"</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">ispell-extra-args</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">'("--sug-mode=ultra" "--lang=en_US" "--run-together" "--run-together-limit=5" "--run-together-min=2"))</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12471;&#12531;&#12479;&#12483;&#12463;&#12473;&#12481;&#12455;&#12483;&#12463; ================</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">flycheck</span>)
(<span style="font-weight: bold;">setq</span> flycheck-indication-mode 'right-fringe)
(add-hook 'flycheck-mode-hook #'flycheck-set-indication-mode)
(eval-after-load 'flycheck
  '(add-hook 'flycheck-mode-hook #'flycheck-cask-setup))

(add-hook 'emacs-lisp-mode-hook 'flycheck-mode)
(add-hook 'python-mode-hook 'flycheck-mode)
(add-hook 'ruby-mode-hook 'flycheck-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#33258;&#21205;&#36215;&#21205;</span>
(<span style="font-weight: bold;">setq</span> flycheck-check-syntax-automatically
      '(save idle-change mode-enabled))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12540;&#12489;&#22793;&#26356;&#24460;&#12289;2&#31186;&#24460;&#12395;&#12481;&#12455;&#12483;&#12463;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> flycheck-idle-change-delay 2)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12504;&#12523;&#12503; ================</span>
(which-key-mode)
(which-key-setup-side-window-bottom)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">dired ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">dired-single</span>)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-dired-init</span> ()
  <span style="font-style: italic;">"Bunch of stuff to run for dired, either immediately or when it's</span>
<span style="font-style: italic;">   loaded."</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&lt;add other stuff here&gt;</span>
  (define-key dired-mode-map [remap dired-find-file]
    'dired-single-buffer)
  (define-key dired-mode-map [remap dired-mouse-find-file-other-window]
    'dired-single-buffer-mouse)
  (define-key dired-mode-map [remap dired-up-directory]
    'dired-single-up-directory))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if dired's already loaded, then the keymap will be bound</span>
(<span style="font-weight: bold;">if</span> (boundp 'dired-mode-map)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">we're good to go; just add our bindings</span>
    (my-dired-init)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">it's not loaded yet, so add our bindings to the load-hook</span>
  (add-hook 'dired-load-hook 'my-dired-init))

(add-hook 'dired-mode-hook 'all-the-icons-dired-mode)
(add-hook 'dired-mode-hook 'dired-hide-details-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23450;&#32681;&#20803;&#12472;&#12515;&#12531;&#12503; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">C-M-p backward-list &#12434;&#19978;&#26360;&#12365;&#12375;&#12390;&#12375;&#12414;&#12358;&#12398;&#12391;&#12467;&#12513;&#12531;&#12488;&#12450;&#12454;&#12488;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(dumb-jump-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(global-set-key (kbd "C-c j") 'dumb-jump-go)</span>
(<span style="font-weight: bold;">setq</span> dumb-jump-selector 'popup)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq dumb-jump-selector 'helm)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">easy-kill ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">easy-kill</span>)
(global-set-key [remap kill-ring-save] 'easy-kill)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">easy-kill-extras</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">easy-kill-extras</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Upgrade `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">mark-word</span><span style="font-weight: bold; font-style: italic;">' and `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">mark-sexp</span><span style="font-weight: bold; font-style: italic;">' with easy-mark</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">equivalents.</span>
(global-set-key (kbd <span style="font-style: italic;">"M-@"</span>) 'easy-mark-word)
(global-set-key (kbd <span style="font-style: italic;">"C-M-@"</span>) 'easy-mark-sexp)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">easy-mark-to-char</span><span style="font-weight: bold; font-style: italic;">' or `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">easy-mark-up-to-char</span><span style="font-weight: bold; font-style: italic;">' could be a good</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">replacement for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">zap-to-char</span><span style="font-weight: bold; font-style: italic;">'.</span>
(global-set-key [remap zap-to-char] 'easy-mark-to-char)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Integrate `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">expand-region</span><span style="font-weight: bold; font-style: italic;">' functionality with easy-kill</span>
(define-key easy-kill-base-map (kbd <span style="font-style: italic;">"o"</span>) 'easy-kill-er-expand)
(define-key easy-kill-base-map (kbd <span style="font-style: italic;">"i"</span>) 'easy-kill-er-unexpand)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Add the following tuples to `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">easy-kill-alist</span><span style="font-weight: bold; font-style: italic;">', preferrably by</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">using `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">customize-variable</span><span style="font-weight: bold; font-style: italic;">'.</span>
(add-to-list 'easy-kill-alist '(?^ backward-line-edge <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?$ forward-line-edge <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?b buffer <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?&lt; buffer-before-point <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?&gt; buffer-after-point <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?f string-to-char-forward <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?F string-up-to-char-forward <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?t string-to-char-backward <span style="font-style: italic;">""</span>))
(add-to-list 'easy-kill-alist '(?T string-up-to-char-backward <span style="font-style: italic;">""</span>))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Emacs 24.4+ comes with rectangle-mark-mode.</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key rectangle-mark-mode-map (kbd "C-. C-,") 'mc/rect-rectangle-to-multiple-cursors)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key cua--rectangle-keymap   (kbd "C-. C-,") 'mc/cua-rectangle-to-multiple-cursors)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">log-mode ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">command-log-mode</span>)
(global-command-log-mode)

(<span style="font-weight: bold;">setq</span> clm/log-command-exceptions*
      '(mozc-handle-event self-insert-command))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">RSS ================</span>

(<span style="font-weight: bold;">setq</span> elfeed-feeds
      '((<span style="font-style: italic;">"https://www.sanityinc.com/feed.xml"</span> sanityinc blog)
        (<span style="font-style: italic;">"https://sachachua.com/blog/category/weekly/feed/"</span> sachachua blog)
        (<span style="font-style: italic;">"https://techracho.bpsinc.jp/feed"</span> Ruby Rails)
        (<span style="font-style: italic;">"http://b.hatena.ne.jp/t-wada/rss"</span> Test)
        (<span style="font-style: italic;">"https://cprss.s3.amazonaws.com/rubyweekly.com.xml"</span> Ruby weekly)
        (<span style="font-style: italic;">"https://news.ycombinator.com/rss"</span> Ruby weekly)
        (<span style="font-style: italic;">"http://pragmaticemacs.com/feed/"</span> Pragmatic Emacs)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">default-browser</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq browse-url-browser-function 'eww-browse-url)</span>
(<span style="font-weight: bold;">setq</span> browse-url-browser-function 'browse-url-firefox)

(run-at-time <span style="font-style: italic;">"23:58pm"</span> (* 24 60 60) (<span style="font-weight: bold;">lambda</span> () (elfeed-search-update--force)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Google&#26908;&#32034; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">google-this</span>)
(google-this-mode 1)
(<span style="font-weight: bold;">setq</span> google-this-location-suffix <span style="font-style: italic;">"co.jp"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36766;&#26360; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">define-word</span>)
(global-set-key (kbd <span style="font-style: italic;">"&lt;end&gt;"</span>) 'define-word-at-point)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">eww ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25913;&#34892;&#12377;&#12427;&#12424;&#12358;&#12395;&#12377;&#12427;</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">shr-insert-document--for-eww</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> them)
  (<span style="font-weight: bold;">let</span> ((shr-width 70)) (apply them)))
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-display-html--fill-column</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> them)
  (advice-add 'shr-insert-document <span style="font-weight: bold;">:around</span> 'shr-insert-document--for-eww)
  (<span style="font-weight: bold;">unwind-protect</span>
      (apply them)
    (advice-remove 'shr-insert-document 'shr-insert-document--for-eww)))
(advice-add 'eww-display-html <span style="font-weight: bold;">:around</span> 'eww-display-html--fill-column)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#33394;&#35373;&#23450;</span>
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">eww-disable-colorize</span> t)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">shr-colorize-region--disable</span> (orig start end fg <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> bg <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> _)
  (<span style="font-weight: bold;">unless</span> eww-disable-colorize
    (funcall orig start end fg)))
(advice-add 'shr-colorize-region <span style="font-weight: bold;">:around</span> 'shr-colorize-region--disable)
(advice-add 'eww-colorize-region <span style="font-weight: bold;">:around</span> 'shr-colorize-region--disable)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-disable-color</span> ()
  <span style="font-style: italic;">"eww &#12391;&#25991;&#23383;&#33394;&#12434;&#21453;&#26144;&#12373;&#12379;&#12394;&#12356;"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">setq-local</span> eww-disable-colorize t)
  (eww-reload))
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-enable-color</span> ()
  <span style="font-style: italic;">"eww &#12391;&#25991;&#23383;&#33394;&#12434;&#21453;&#26144;&#12373;&#12379;&#12427;"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">setq-local</span> eww-disable-colorize nil)
  (eww-reload))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12487;&#12501;&#12457;&#12523;&#12488;&#12456;&#12531;&#12472;&#12531;</span>
(<span style="font-weight: bold;">setq</span> eww-search-prefix <span style="font-style: italic;">"https://www.google.co.jp/search?q="</span>)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">cl-lib</span>)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-tag-pre</span> (dom)
  (<span style="font-weight: bold;">let</span> ((shr-folding-mode 'none)
        (shr-current-font 'default))
    (shr-ensure-newline)
    (insert (eww-fontify-pre dom))
    (shr-ensure-newline)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-fontify-pre</span> (dom)
  (<span style="font-weight: bold;">with-temp-buffer</span>
    (shr-generic dom)
    (<span style="font-weight: bold;">let</span> ((mode (eww-buffer-auto-detect-mode)))
      (<span style="font-weight: bold;">when</span> mode
        (eww-fontify-buffer mode)))
    (buffer-string)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-fontify-buffer</span> (mode)
  (<span style="font-weight: bold;">delay-mode-hooks</span> (funcall mode))
  (font-lock-default-function mode)
  (font-lock-default-fontify-region (point-min)
                                    (point-max)
                                    nil))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eww-buffer-auto-detect-mode</span> ()
  (<span style="font-weight: bold;">let*</span> ((map '((ada ada-mode)
                (awk awk-mode)
                (c c-mode)
                (cpp c++-mode)
                (clojure clojure-mode lisp-mode)
                (csharp csharp-mode java-mode)
                (css css-mode)
                (dart dart-mode)
                (delphi delphi-mode)
                (emacslisp emacs-lisp-mode)
                (erlang erlang-mode)
                (fortran fortran-mode)
                (fsharp fsharp-mode)
                (go go-mode)
                (groovy groovy-mode)
                (haskell haskell-mode)
                (html html-mode)
                (java java-mode)
                (javascript javascript-mode)
                (json json-mode javascript-mode)
                (latex latex-mode)
                (lisp lisp-mode)
                (lua lua-mode)
                (matlab matlab-mode octave-mode)
                (objc objc-mode c-mode)
                (perl perl-mode)
                (php php-mode)
                (prolog prolog-mode)
                (python python-mode)
                (r r-mode)
                (ruby ruby-mode)
                (rust rust-mode)
                (scala scala-mode)
                (shell shell-script-mode)
                (smalltalk smalltalk-mode)
                (sql sql-mode)
                (swift swift-mode)
                (visualbasic visual-basic-mode)
                (xml sgml-mode)))
         (language (language-detection-string
                    (buffer-substring-no-properties (point-min) (point-max))))
         (modes (cdr (assoc language map)))
         (mode (<span style="font-weight: bold;">cl-loop</span> for mode in modes
                        when (fboundp mode)
                        return mode)))
    (message (format <span style="font-style: italic;">"%s"</span> language))
    (<span style="font-weight: bold;">when</span> (fboundp mode)
      mode)))

(<span style="font-weight: bold;">setq</span> shr-external-rendering-functions
      '((pre . eww-tag-pre)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#26657;&#27491;&#12484;&#12540;&#12523; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">markdown-mode</span>)
(define-key markdown-mode-map (kbd <span style="font-style: italic;">"C-c C-j"</span>) nil)

(flycheck-define-checker textlint
  <span style="font-style: italic;">"A linter for Markdown."</span>
  <span style="font-weight: bold;">:command</span> (<span style="font-style: italic;">"textlint"</span> <span style="font-style: italic;">"--format"</span> <span style="font-style: italic;">"unix"</span> source)
  <span style="font-weight: bold;">:error-patterns</span>
  ((warning line-start (file-name) <span style="font-style: italic;">":"</span> line <span style="font-style: italic;">":"</span> column <span style="font-style: italic;">": "</span>
            (id (one-or-more (not (any <span style="font-style: italic;">" "</span>))))
            (message (one-or-more not-newline)
                     (zero-or-more <span style="font-style: italic;">"\n"</span> (any <span style="font-style: italic;">" "</span>) (one-or-more not-newline)))
            line-end))
  <span style="font-weight: bold;">:modes</span> (text-mode markdown-mode gfm-mode org-mode))

(add-hook 'markdown-mode-hook
          '(lambda ()
             (add-node-modules-path)
             (<span style="font-weight: bold;">setq</span> flycheck-checker 'textlint)
             (current-word-highlight-mode)
             (flycheck-mode 1)))

(add-hook 'org-mode-hook
          '(lambda ()
             (add-node-modules-path)
             (<span style="font-weight: bold;">setq</span> flycheck-checker 'textlint)
             <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-sticky-header-mode)</span>
             (flycheck-mode 1)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#27491;&#35215;&#34920;&#29694; ================</span>
(global-set-key (kbd <span style="font-style: italic;">"C-M-%"</span>) 'vr/query-replace)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">visual-regexp-steroids</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">write-room ================</span>
(global-set-key [f7] 'writeroom-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">git-link ================</span>
(<span style="font-weight: bold;">setq</span> git-link-default-branch <span style="font-style: italic;">"main"</span>)
(<span style="font-weight: bold;">setq</span> git-link-use-commit t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">undo ================</span>
(global-undo-tree-mode)
(<span style="font-weight: bold;">setq</span> undo-tree-auto-save-history nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">eradio ================</span>
(<span style="font-weight: bold;">setq</span> eradio-channels '((<span style="font-style: italic;">"def con - soma fm"</span> . <span style="font-style: italic;">"https://somafm.com/defcon256.pls"</span>)
                        (<span style="font-style: italic;">"metal - soma fm"</span>   . <span style="font-style: italic;">"https://somafm.com/metal130.pls"</span>)
                        (<span style="font-style: italic;">"cyberia - lainon"</span>  . <span style="font-style: italic;">"https://lainon.life/radio/cyberia.ogg.m3u"</span>)
                        (<span style="font-style: italic;">"cafe - lainon"</span>     . <span style="font-style: italic;">"https://lainon.life/radio/cafe.ogg.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - HBR1.com"</span> . <span style="font-style: italic;">"http://ubuntu.hbr1.com:19800/ambient.ogg"</span>)
                        (<span style="font-style: italic;">"ambient - RADIO ESTILO LEBLON"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us4.internet-radio.com:8193/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - Pink Noise Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk1.internet-radio.com:8004/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - Deeply Beautiful Chillout Music - A Heavenly World of Sound"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk2.internet-radio.com:31491/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - Chill Lounge Florida"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us5.internet-radio.com:8283/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - PARTY VIBE RADIO : AMBIENT"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://www.partyviberadio.com:8056/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"healing - Healing Music Radio - The music of Peter Edwards"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us3.internet-radio.com:8169/live.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - Real World Sounds"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk5.internet-radio.com:8260/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"meditation - SilentZazen"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk5.internet-radio.com:8167/live.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"meditation - Zero Beat Zone (MRG.fm)"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://62.149.196.16:8800/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"meditation - Meditation Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://213.239.218.99:7241/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - AmbientRadio (MRG.fm)"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://62.149.196.16:8888/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"jungle - Konflict Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk3.internet-radio.com:8192/live.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"jungle - Future Pressure Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk3.internet-radio.com:8108/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"jungle - PARTY VIBE RADIO : JUNGLE"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://www.partyviberadio.com:8004/listen.pls?sid=2&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"jazz - Smooth Jazz Florida"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us4.internet-radio.com:8266/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"rock - Classic Rock Florida HD"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us4.internet-radio.com:8258/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"dance - Dance UK Radio danceradiouk"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk2.internet-radio.com:8024/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"rock - Majestic Jukebox Radio #HIGH QUALITY SOUND"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://uk3.internet-radio.com:8405/live.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"ambient - LIFE CHILL MUSIC"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://aska.ru-hoster.com:8053/autodj.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"dance - PulseEDM Dance Music Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://pulseedm.cdnstream1.com:8124/1373_128.m3u&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"piano - Matt Johnson Radio"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://us2.internet-radio.com:8046/listen.pls&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"piano - Music Lake - Relaxation Music, Meditation, Focus, Chill, Nature Sounds"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://104.251.118.50:8626/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"piano - Bru Zane Classical Radio - Rediscovering French Romantic Music"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://116.202.241.212:7001/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"piano - CALMRADIO.COM - Most Beautiful Piano Ever"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://209.58.147.84:19991/listen.pls?sid=1&amp;t=.m3u"</span>)
                        (<span style="font-style: italic;">"piano - CALMRADIO.COM - Light Jazz Piano"</span> . <span style="font-style: italic;">"https://www.internet-radio.com/servers/tools/playlistgenerator/?u=http://23.82.11.88:10800/listen.pls?sid=1&amp;t=.m3u"</span>)
                        ))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">typing game ================</span>
(<span style="font-weight: bold;">setq</span> toe-highscore-file <span style="font-style: italic;">"~/.emacs.d/games/.toe-scores"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">create-link ================</span>
(<span style="font-weight: bold;">setq</span> create-link-default-format 'create-link-format-org)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ripgrep ================</span>
(rg-enable-default-bindings)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Emacs Lisp ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">paredit</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'emacs-lisp-mode-hook 'enable-paredit-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'lisp-interaction-mode-hook 'enable-paredit-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'lisp-mode-hook 'enable-paredit-mode)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'ielm-mode-hook 'enable-paredit-mode)</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">lispxmp</span>)
(define-key emacs-lisp-mode-map (kbd <span style="font-style: italic;">"C-&lt;return&gt;"</span>) 'lispxmp)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">graphql-mode</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ob-graphql</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">smart-newline ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">smart-newline</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-m"</span>) 'newline)
(add-hook 'ruby-mode-hook 'smart-newline-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org78d37de" class="outline-2">
<h2 id="org78d37de"><span class="section-number-2">8.</span> Rails</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">ruby_on_rails&#12514;&#12540;&#12489;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">projectile-rails</span>)
(projectile-rails-global-mode)
(add-hook 'projectile-mode-hook 'projectile-rails-on)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">rspec ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rspec-mode</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Rspec&#12398;&#23455;&#34892;&#32080;&#26524;&#12434;&#12473;&#12463;&#12525;&#12540;&#12523;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> compilation-scroll-output t)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Docker&#12398;&#12392;&#12365;&#12398;&#35373;&#23450;&#12290;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12372;&#12392;&#12395;&#35373;&#23450;&#12375;&#12383;&#12356;&#12364;&#8230;</span>
(<span style="font-weight: bold;">setq</span> rspec-use-docker-when-possible 1)
(<span style="font-weight: bold;">setq</span> rspec-docker-container <span style="font-style: italic;">"rails"</span>)
(<span style="font-weight: bold;">setq</span> rspec-docker-command <span style="font-style: italic;">"docker-compose -f docker-compose.yml -f docker-compose-app.yml -f docker-compose-app.override.yml exec"</span>)
(<span style="font-weight: bold;">setq</span> rspec-docker-cwd <span style="font-style: italic;">""</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">RAILS_ENV=test&#12434;&#36861;&#21152;</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">rspec-runner</span> ()
  <span style="font-style: italic;">"Return command line to run rspec."</span>
  (<span style="font-weight: bold;">let</span> ((bundle-command (<span style="font-weight: bold;">if</span> (rspec-bundle-p) <span style="font-style: italic;">"RAILS_ENV=test bundle exec "</span> <span style="font-style: italic;">""</span>))
        (zeus-command (<span style="font-weight: bold;">if</span> (rspec-zeus-p) <span style="font-style: italic;">"zeus "</span> nil))
        (spring-command (<span style="font-weight: bold;">if</span> (rspec-spring-p) <span style="font-style: italic;">"spring "</span> nil)))
    (concat (<span style="font-weight: bold;">or</span> zeus-command spring-command bundle-command)
            (<span style="font-weight: bold;">if</span> (rspec-rake-p)
                (concat rspec-rake-command <span style="font-style: italic;">" spec"</span>)
              rspec-spec-command))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq rspec-use-spring-when-possible nil)</span>
(<span style="font-weight: bold;">setq</span> rspec-use-spring-when-possible t)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">rspec-spring-p</span> ()
  (<span style="font-weight: bold;">and</span> rspec-use-spring-when-possible
       (stringp (executable-find <span style="font-style: italic;">"spring"</span>))))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">spring</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">bin/rspec</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12471;&#12531;&#12479;&#12483;&#12463;&#12473;&#12481;&#12455;&#12483;&#12463; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">flycheck &#12392; rubocop &#12434;&#36899;&#25658;&#12373;&#12379;&#12427;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rubocop</span>)
(add-hook 'ruby-mode-hook 'rubocop-mode)
(add-hook 'ruby-mode-hook
          '(lambda ()
             (<span style="font-weight: bold;">setq</span> flycheck-checker 'ruby-rubocop)))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">See: https://qiita.com/watson1978/items/debafdfc49511fb173e9</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#29420;&#33258;&#12395; checker &#12434;&#23450;&#32681;&#12377;&#12427;&#65288;&#12362;&#22909;&#12415;&#12391;&#65289;</span>
(flycheck-define-checker ruby-rubocop
  <span style="font-style: italic;">"A Ruby syntax and style checker using the RuboCop tool."</span>
  <span style="font-weight: bold;">:command</span> (<span style="font-style: italic;">"rubocop"</span> <span style="font-style: italic;">"--format"</span> <span style="font-style: italic;">"emacs"</span>
            (config-file <span style="font-style: italic;">"--config"</span> flycheck-rubocoprc) source)
  <span style="font-weight: bold;">:error-patterns</span>
  ((warning line-start
            (file-name) <span style="font-style: italic;">":"</span> line <span style="font-style: italic;">":"</span> column <span style="font-style: italic;">": "</span> (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">"C"</span> <span style="font-style: italic;">"W"</span>) <span style="font-style: italic;">": "</span> (message) line-end)
   (<span style="font-weight: bold;">error</span> line-start
          (file-name) <span style="font-style: italic;">":"</span> line <span style="font-style: italic;">":"</span> column <span style="font-style: italic;">": "</span> (<span style="font-weight: bold;">or</span> <span style="font-style: italic;">"E"</span> <span style="font-style: italic;">"F"</span>) <span style="font-style: italic;">": "</span> (message) line-end))
  <span style="font-weight: bold;">:modes</span> (ruby-mode motion-mode))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">rinari</span>
(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rinari</span> nil 'noerror)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rinari</span>)
  (add-hook 'ruby-mode-hook 'rinari-minor-mode))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">rspec-mode &#29992;&#12398; snippet &#12434;&#35469;&#35672;&#12373;&#12379;&#12427;</span>
(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rinari</span> nil 'noerror)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rspec-mode</span>)
  (eval-after-load 'rspec-mode
    '(rspec-install-snippets)))

(<span style="font-weight: bold;">setq</span> flycheck-ruby-rubocop-executable <span style="font-style: italic;">"bundle exec rubocop"</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35036;&#23436; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ruby-electric</span>)
(add-hook 'ruby-mode-hook '(lambda ()
                             (ruby-electric-mode t)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23455;&#34892;&#29872;&#22659; ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">quickrun</span>)
(global-set-key (kbd <span style="font-style: italic;">"&lt;f8&gt;"</span>) 'quickrun)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">pry</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">inf-ruby</span>)
(<span style="font-weight: bold;">setq</span> inf-ruby-default-implementation <span style="font-style: italic;">"pry"</span>)
(<span style="font-weight: bold;">setq</span> inf-ruby-eval-binding <span style="font-style: italic;">"Pry.toplevel_binding"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ri&#12394;&#12393;&#12398;&#12456;&#12473;&#12465;&#12540;&#12503;&#12471;&#12540;&#12465;&#12531;&#12473;&#12434;&#20966;&#29702;&#12375;&#12289;&#33394;&#20184;&#12369;&#12377;&#12427;</span>
(add-hook 'inf-ruby-mode-hook 'ansi-color-for-comint-mode-on)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">slim-mode ================</span>
(<span style="font-weight: bold;">unless</span> (package-installed-p 'slim-mode)
  (package-refresh-contents) (package-install 'slim-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.slim?\\'"</span> . slim-mode))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">yaml-mode ================</span>
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.ya?ml$"</span> . yaml-mode))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12510;&#12472;&#12483;&#12463;&#12467;&#12513;&#12531;&#12488;&#12434;&#25407;&#20837;&#12375;&#12394;&#12356;</span>
(<span style="font-weight: bold;">setq</span> ruby-insert-encoding-magic-comment nil)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23550;&#24540;&#12502;&#12525;&#12483;&#12463;&#12434;&#20809;&#12425;&#12379;&#12427;&#26178;&#38291;&#12434;&#30701;&#12367;&#12377;&#12427;</span>
(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">ruby-block-delay</span> 0
  <span style="font-style: italic;">"*Time in seconds to delay before showing a matching paren."</span>
  <span style="font-weight: bold;">:type</span>  'number
  <span style="font-weight: bold;">:group</span> 'ruby-block)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">xmp(&#23455;&#34892;&#32080;&#26524;&#12450;&#12494;&#12486;&#12540;&#12471;&#12519;&#12531;)</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">rcodetools</span>)
(define-key ruby-mode-map (kbd <span style="font-style: italic;">"C-&lt;return&gt;"</span>) 'xmp)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">activate robe</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CI&#12391;&#12399;&#23455;&#34892;&#12375;&#12394;&#12356;</span>
(<span style="font-weight: bold;">when</span> window-system
  (<span style="font-weight: bold;">progn</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(inf-ruby)</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(robe-start)</span>
    ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbffbb7c" class="outline-2">
<h2 id="orgbffbb7c"><span class="section-number-2">9.</span> Go</h2>
<div class="outline-text-2" id="text-9">
<p>
goの設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">go-mode</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ob-go</span>)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Go &#12487;&#12496;&#12483;&#12460;&#12540;</span>
(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">dap-mode</span>
  <span style="font-weight: bold;">:after</span> lsp-mode
  <span style="font-weight: bold;">:hook</span>
  (lsp-mode . dap-mode)
  (lsp-mode . dap-ui-mode)
  <span style="font-weight: bold;">:config</span>
  (dap-mode 1)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">dap-hydra</span>)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">dap-dlv-go</span>))

(<span style="font-weight: bold;">setq</span> dap-print-io t)
(<span style="font-weight: bold;">setq</span> lsp-gopls-server-path <span style="font-style: italic;">"~/go/bin/gopls"</span>)
(<span style="font-weight: bold;">setq</span> dap-dlv-go-delve-path <span style="font-style: italic;">"~/go/bin/dlv"</span>)

(<span style="font-weight: bold;">setq</span> dap-print-io t)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">go-eldoc</span>)
(add-hook 'go-mode-hook 'go-eldoc-setup)

(<span style="font-weight: bold;">setq</span> gofmt-command <span style="font-style: italic;">"goimports"</span>)
(add-hook 'before-save-hook 'gofmt-before-save)
</pre>
</div>
</div>
</div>

<div id="outline-container-org02f8ebb" class="outline-2">
<h2 id="org02f8ebb"><span class="section-number-2">10.</span> Python</h2>
<div class="outline-text-2" id="text-10">
<p>
Pythonの設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-hook 'python-mode-hook 'jedi:setup)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq jedi:complete-on-dot t)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(jedi:setup)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;; (define-key jedi-mode-map (kbd "&lt;C-tab&gt;") nil) ;;C-tab&#12399;&#12454;&#12451;&#12531;&#12489;&#12454;&#12398;&#31227;&#21205;&#12395;&#29992;&#12356;&#12427;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq jedi:complete-on-dot t)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq ac-sources</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(delete 'ac-source-words-in-same-mode-buffers ac-sources)) ;;jedi&#12398;&#35036;&#23436;&#20505;&#35036;&#12384;&#12369;&#12391;&#12356;&#12356;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'ac-sources 'ac-source-filename)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'ac-sources 'ac-source-jedi-direct)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org473ebae" class="outline-2">
<h2 id="org473ebae"><span class="section-number-2">11.</span> Haskell</h2>
<div class="outline-text-2" id="text-11">
<p>
haskellの設定。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp">(add-hook 'haskell-mode-hook 'turn-on-haskell-doc-mode)
(add-hook 'haskell-mode-hook 'turn-on-haskell-indent)

(custom-set-variables
 '(haskell-indent-after-keywords (<span style="font-weight: bold;">quote</span> ((<span style="font-style: italic;">"where"</span> 4 0) (<span style="font-style: italic;">"of"</span> 4) (<span style="font-style: italic;">"do"</span> 4) (<span style="font-style: italic;">"mdo"</span> 4) (<span style="font-style: italic;">"rec"</span> 4) (<span style="font-style: italic;">"in"</span> 4 0) (<span style="font-style: italic;">"{"</span> 4) <span style="font-style: italic;">"if"</span> <span style="font-style: italic;">"then"</span> <span style="font-style: italic;">"else"</span> <span style="font-style: italic;">"let"</span>)))
 '(haskell-indent-offset 4)
 '(haskell-indent-spaces 4))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0882a0" class="outline-2">
<h2 id="orgc0882a0"><span class="section-number-2">12.</span> Web</h2>
<div class="outline-text-2" id="text-12">
<p>
web-modeはhtmlライクな複数の言語に対応するモード。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">web-mode</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">web-mode</span>)
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.js[x]?$"</span> . web-mode))<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">js + jsx</span>
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.tsx$"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.phtml\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.php\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.[gj]sp\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.as[cp]x\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.erb\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.mustache\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.djhtml\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.html\\'"</span> . web-mode))
(<span style="font-weight: bold;">setq</span> web-mode-engines-alist
      '((<span style="font-style: italic;">"php"</span>    . <span style="font-style: italic;">"\\.phtml\\'"</span>)
        (<span style="font-style: italic;">"blade"</span>  . <span style="font-style: italic;">"\\.blade\\."</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">JS+JSX&#35373;&#23450; ================</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12513;&#12531;&#12488;&#12450;&#12454;&#12488;&#12398;&#35373;&#23450;</span>
(add-hook 'web-mode-hook
          '(lambda ()
             (add-to-list 'web-mode-comment-formats '(<span style="font-style: italic;">"jsx"</span> . <span style="font-style: italic;">"//"</span> ))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">.js &#12391;&#12418; JSX &#32232;&#38598;&#12514;&#12540;&#12489;&#12395;</span>
(<span style="font-weight: bold;">setq</span> web-mode-content-types-alist
      '((<span style="font-style: italic;">"jsx"</span> . <span style="font-style: italic;">"\\.js[x]?\\'"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">JS&#12471;&#12531;&#12479;&#12483;&#12463;&#12473;&#12481;&#12455;&#12483;&#12463; ================</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">ESlint</span>
(eval-after-load 'flycheck
  '(custom-set-variables
    '(flycheck-disabled-checkers '(javascript-jshint javascript-jscs))
    ))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">eslint &#29992;&#12398; linter &#12434;&#30331;&#37682;</span>
(flycheck-add-mode 'javascript-eslint 'web-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#20316;&#26989;&#12375;&#12390;&#12356;&#12427; project &#12398; node-module &#12434;&#12415;&#12390;&#12289;&#36969;&#20999;&#12395;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">linter &#12398;&#35373;&#23450;&#12434;&#35501;&#12415;&#36796;&#12416;</span>
(eval-after-load 'web-mode
  '(progn
     (add-hook 'web-mode-hook #'add-node-modules-path)
     (add-hook 'web-mode-hook #'prettier-js-mode)))
(eval-after-load 'web-mode
  '(add-hook 'rjsx-mode-hook #'add-node-modules-path))
(add-hook 'web-mode-hook 'flycheck-mode)
(add-hook 'rjsx-mode-hook 'flycheck-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23455;&#34892;: M-x eslint-fix-file</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eslint-fix-file</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (call-process-shell-command
   (mapconcat 'shell-quote-argument
              (list <span style="font-style: italic;">"eslint"</span> <span style="font-style: italic;">"--fix"</span> (buffer-file-name)) <span style="font-style: italic;">" "</span>) <span style="font-weight: bold;">nil 0))</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23455;&#34892;&#24460;&#12289;buffer &#12434; revert &#12377;&#12427;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#23455;&#34892;: M-x eslint-fix-file-and-revert</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eslint-fix-file-and-revert</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (eslint-fix-file)
  (revert-buffer t t))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12452;&#12531;&#12487;&#12531;&#12488;&#31561;&#35519;&#25972; ================</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-web-mode-hook</span> ()
  <span style="font-style: italic;">"Hooks for Web mode."</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq web-mode-attr-indent-offset 0)</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq web-mode-markup-indent-offset 0)</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq web-mode-css-indent-offset 0)</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq web-mode-code-indent-offset 0)</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq web-mode-sql-indent-offset 0)</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq sql-indent-offset 0)</span>
  (<span style="font-weight: bold;">setq</span> indent-tabs-mode nil)
  (<span style="font-weight: bold;">setq</span> tab-width 2)
  (<span style="font-weight: bold;">setq</span> json-reformat:indent-width 2)

  (<span style="font-weight: bold;">setq</span> web-mode-attr-indent-offset nil)
  (<span style="font-weight: bold;">setq</span> web-mode-enable-auto-closing t)
  (<span style="font-weight: bold;">setq</span> web-mode-enable-auto-pairing t)
  (<span style="font-weight: bold;">setq</span> web-mode-auto-close-style 2)
  (<span style="font-weight: bold;">setq</span> web-mode-tag-auto-close-style 2))
(add-hook 'web-mode-hook 'my-web-mode-hook)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">CSS ================</span>
(<span style="font-weight: bold;">setq</span> css-indent-offset 2)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">SQL ================</span>
(add-hook 'ejc-sql-minor-mode-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (ejc-eldoc-setup)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12467;&#12510;&#12531;&#12489;&#12434;&#22823;&#25991;&#23383;&#12395;&#12377;&#12427;</span>
(add-hook 'sql-mode-hook 'sqlup-mode)
(add-hook 'sql-interactive-mode-hook 'sqlup-mode)
(global-set-key (kbd <span style="font-style: italic;">"C-c u"</span>) 'sqlup-capitalize-keywords-in-region)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#32080;&#26524;&#12434;&#25240;&#12426;&#36820;&#12373;&#12394;&#12356;&#12424;&#12358;&#12395;&#12377;&#12427;</span>
(add-hook 'sql-interactive-mode-hook
          '(lambda()
             (<span style="font-weight: bold;">setq</span> truncate-lines nil
                   truncate-partial-width-windows t)))

(<span style="font-weight: bold;">setq</span> erc-server <span style="font-style: italic;">"irc.libera.chat"</span>
      erc-nick <span style="font-style: italic;">"kijimad"</span>
      erc-user-full-name <span style="font-style: italic;">"Kijima Daigo"</span>
      erc-track-shorten-start 8
      erc-autojoin-channels-alist '((<span style="font-style: italic;">"irc-libera.chat"</span> <span style="font-style: italic;">"#systemcrafters"</span> <span style="font-style: italic;">"#emacs"</span>))
      erc-kill-buffer-on-part t
      erc-auto-query 'bufy)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Typescript ================</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">typescript-mode</span>)
(add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.ts\\'"</span> . typescript-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org849eebe" class="outline-2">
<h2 id="org849eebe"><span class="section-number-2">13.</span> LSP</h2>
<div class="outline-text-2" id="text-13">
<p>
lsp-modeはLSPを使えるようにするパッケージ。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>metalがインストールできないので確認を無効化する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> lsp-verify-signature nil)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>言語共通設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">flycheck</span>
  <span style="font-weight: bold;">:init</span> (global-flycheck-mode))

(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">lsp-mode</span>
  <span style="font-weight: bold;">:custom</span>
  (lsp-completion-provider <span style="font-weight: bold;">:none</span>)
  (lsp-prefer-flymake nil)
  (lsp-print-io nil)
  (lsp-trace nil)
  (lsp-print-performance nil)
  (lsp-auto-guess-root t)
  (lsp-document-sync-method 'incremental)
  (lsp-response-timeout 5)
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my/lsp-mode-setup-completion</span> ()
    (<span style="font-weight: bold;">setf</span> (alist-get 'styles (alist-get 'lsp-capf completion-category-defaults))
          '(orderless))) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Configure orderless</span>
  <span style="font-weight: bold;">:hook</span>
  (scala-mode . lsp)
  (clojure-mode . lsp)
  (c-mode . lsp)
  (c++-mode . lsp)
  (rust-mode . lsp)
  (go-mode . lsp)
  (lsp-mode . lsp-lens-mode)
  (lsp-mode . lsp-completion-mode)
  (lsp-mode . lsp-ui-mode)
  (lsp-completion-mode . my/lsp-mode-setup-completion)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Uncomment following section if you would like to tune lsp-mode performance according to</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://emacs-lsp.github.io/lsp-mode/page/performance/</span>
  <span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(setq gc-cons-threshold 100000000) ;; 100mb</span>
  <span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(setq read-process-output-max (* 1024 1024)) ;; 1mb</span>
  <span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(setq lsp-idle-delay 0.500)</span>
  <span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">(setq lsp-log-io nil)</span>
  )
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>scala用を設定する</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package scala-mode</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:interpreter</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">("scala" . scala-mode))</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;; Enable sbt mode for executing sbt commands</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package sbt-mode</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:commands sbt-start sbt-command</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:config</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; WORKAROUND: https://github.com/ensime/emacs-sbt-mode/issues/31</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; allows using SPACE when in the minibuffer</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(substitute-key-definition</span>
<span style="font-weight: bold; font-style: italic;">;;    </span><span style="font-weight: bold; font-style: italic;">'minibuffer-complete-word</span>
<span style="font-weight: bold; font-style: italic;">;;    </span><span style="font-weight: bold; font-style: italic;">'self-insert-command</span>
<span style="font-weight: bold; font-style: italic;">;;    </span><span style="font-weight: bold; font-style: italic;">minibuffer-local-completion-map)</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; sbt-supershell kills sbt-mode:  https://github.com/hvesalai/emacs-sbt-mode/issues/152</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(setq sbt:program-options '("-Dsbt.supershell=false"))</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package lsp-metals</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:ensure t</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:custom</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; Metals claims to support range formatting by default but it supports range</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; formatting of multiline strings only. You might want to disable it so that</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">;; emacs can use indentation provided by scala-mode.</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(lsp-metals-server-args '("-J-Dmetals.allow-multiline-string-formatting=off"))</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:hook (scala-mode . lsp))</span>
</pre>
</div>

<p>
使ってない。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ドキュメントをホバー表示できるようにする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">lsp-ui</span>
  <span style="font-weight: bold;">:custom</span>
  (lsp-ui-doc-enable t)
  (lsp-ui-doc-header t)
  (lsp-ui-doc-include-signature t)
  (lsp-ui-doc-max-width 150)
  (lsp-ui-doc-max-height 30)
  (lsp-ui-peek-enable t))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>snippetを挿入する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">yasnippet</span>)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>DAPデバッガーを使えるようにする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">posframe</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Posframe is a pop-up tool that must be manually installed for dap-mode</span>
  )

(<span style="font-weight: bold;">use-package</span> <span style="font-weight: bold; text-decoration: underline;">dap-ui</span>
  <span style="font-weight: bold;">:config</span>
  (dap-ui-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cccde1" class="outline-2">
<h2 id="org9cccde1"><span class="section-number-2">14.</span> corfu</h2>
<div class="outline-text-2" id="text-14">
<p>
corfuはシンプルな補完を提供するパッケージ。
</p>

<ul class="org-ul">
<li><a href="https://tam5917.hatenablog.com/entry/2022/02/05/141115">corfuまわりの設定（vertico, marginalia, orderless, cape, kind-icon, affe） - 備忘録</a></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>起動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">corfu</span>)
(global-corfu-mode)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>基本設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> corfu-auto t)
(<span style="font-weight: bold;">setq</span> corfu-auto-prefix 3)
(<span style="font-weight: bold;">setq</span> corfu-count 15)
(<span style="font-weight: bold;">setq</span> corfu-cycle t)
(<span style="font-weight: bold;">setq</span> corfu-preselect-first t) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#33258;&#21205;&#30340;&#12395;&#26368;&#21021;&#12398;&#20505;&#35036;&#12434;&#36984;&#25246;&#12377;&#12427;</span>
(<span style="font-weight: bold;">setq</span> corfu-quit-at-boundary t) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#12473;&#12506;&#12540;&#12473;&#12434;&#20837;&#12428;&#12427;&#12392;quit</span>
(<span style="font-weight: bold;">setq</span> corfu-quit-no-match t)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>候補選択を循環させる</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> completion-cycle-threshold 3)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">corfu-beginning-of-prompt</span> ()
  <span style="font-style: italic;">"Move to beginning of completion input."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (corfu--goto -1)
  (goto-char (car completion-in-region--data)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">corfu-end-of-prompt</span> ()
  <span style="font-style: italic;">"Move to end of completion input."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (corfu--goto -1)
  (goto-char (cadr completion-in-region--data)))

(define-key corfu-map [remap move-beginning-of-line] #'corfu-beginning-of-prompt)
(define-key corfu-map [remap move-end-of-line] #'corfu-end-of-prompt)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>その他の連携パッケージ</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">vertico</span>)
(vertico-mode)
(<span style="font-weight: bold;">setq</span> vertico-count 20)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">vertico-directory</span>)
(define-key vertico-map (kbd <span style="font-style: italic;">"C-l"</span>) #'vertico-directory-up)
(define-key vertico-map <span style="font-style: italic;">"\r"</span> #'vertico-directory-enter)  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">enter dired</span>
(define-key vertico-map <span style="font-style: italic;">"\d"</span> #'vertico-directory-delete-char)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">marginalia</span>)
(marginalia-mode +1)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">marginalia-annotators&#12434;&#12469;&#12452;&#12463;&#12523;&#12377;&#12427;</span>
(define-key minibuffer-local-map (kbd <span style="font-style: italic;">"C-M-a"</span>) #'marginalia-cycle)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">orderless</span>)
(<span style="font-weight: bold;">setq</span> completion-styles '(orderless partial-completion))
(<span style="font-weight: bold;">setq</span> completion-category-defaults nil)
(<span style="font-weight: bold;">setq</span> completion-category-overrides nil)

(orderless-define-completion-style orderless+initialism
  (orderless-matching-styles '(orderless-initialism <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#19968;&#30058;&#26368;&#21021;&#12395;initializm</span>
                               orderless-literal  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#27425;&#12395;&#12522;&#12486;&#12521;&#12523;&#12510;&#12483;&#12481;</span>
                               orderless-regexp)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(setq completion-category-defaults nil)</span>
(<span style="font-weight: bold;">setq</span> completion-category-overrides
      '((eglot (styles orderless+initialism))
        (command (styles orderless+initialism))
        (symbol (styles orderless+initialism))
        (variable (styles orderless+initialism))))
(<span style="font-weight: bold;">setq</span> orderless-component-separator #'orderless-escapable-split-on-space)

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">cape</span>)
(add-to-list 'completion-at-point-functions #'cape-file)
(add-to-list 'completion-at-point-functions #'cape-tex)
(add-to-list 'completion-at-point-functions #'cape-dabbrev)
(add-to-list 'completion-at-point-functions #'cape-keyword)
(add-to-list 'completion-at-point-functions #'cape-abbrev)
(add-to-list 'completion-at-point-functions #'cape-ispell)
(add-to-list 'completion-at-point-functions #'cape-symbol)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Emacs&#12398;SVG&#23550;&#24540;&#12467;&#12531;&#12497;&#12452;&#12523;&#12364;&#24517;&#35201;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">kind-icon</span>)
(<span style="font-weight: bold;">setq</span> kind-icon-default-face 'corfu-default)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">If 4k, big size icon displayed.</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'corfu-margin-formatters #'kind-icon-margin-formatter)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(pop corfu-margin-formatters)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Available commands</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">affe-grep: Filters the content of all text files in the current directory</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">affe-find: Filters the file paths of all files in the current directory</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">affe</span>)
(consult-customize affe-grep <span style="font-weight: bold;">:preview-key</span> (kbd <span style="font-style: italic;">"M-."</span>))
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">affe-orderless-regexp</span> <span style="font-style: italic;">""</span>)
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">affe-orderless-regexp-compiler</span> (input _type)
  (<span style="font-weight: bold;">setq</span> affe-orderless-regexp (orderless-pattern-compiler input))
  (cons affe-orderless-regexp
        (<span style="font-weight: bold;">lambda</span> (str) (orderless--highlight affe-orderless-regexp str))))
(<span style="font-weight: bold;">setq</span> affe-regexp-compiler #'affe-orderless-regexp-compiler)

(add-hook 'corfu-mode-hook 'corfu-doc-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8974af8" class="outline-2">
<h2 id="org8974af8"><span class="section-number-2">15.</span> ivy</h2>
<div class="outline-text-2" id="text-15">
<p>
ivyはさまざまなインクリメンタル検索を追加するパッケージ。
</p>

<ul class="org-ul">
<li>参考設定
<ul class="org-ul">
<li><a href="https://qiita.com/takaxp/items/2fde2c119e419713342b">https://qiita.com/takaxp/items/2fde2c119e419713342b</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>M-o をivy-hydra-read-action に割り当てる</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">ivy-hydra</span> nil t)
  (<span style="font-weight: bold;">setq</span> ivy-read-action-function #'ivy-hydra-read-action))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Magitとの連携</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> magit-completing-read-function 'ivy-completing-read)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ミニバッファでコマンド発行を認める。何階層入ったかプロンプトに表示する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">setq</span> enable-recursive-minibuffers t)
  (minibuffer-depth-indicate-mode 1))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ESC連打でミニバッファを閉じる</label><pre class="src src-emacs-lisp">(define-key ivy-minibuffer-map (kbd <span style="font-style: italic;">"&lt;escape&gt;"</span>) 'minibuffer-keyboard-quit)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>プロンプトの表示が長い時に折り返す（選択候補も折り返される）</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-truncate-lines nil)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>リスト先頭で `C-p' するとき，リストの最後に移動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-wrap t)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>表示設定する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-count-format <span style="font-style: italic;">"%d -&gt; %d "</span>)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>新規作成プロンプトを表示する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> ivy-use-selectable-prompt t)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>counsel-mark-ring のリストをソートさせない</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> <span style="font-style: italic;">"ivy"</span>
  (<span style="font-weight: bold;">setf</span> (alist-get 'counsel-mark-ring ivy-sort-functions-alist) nil))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>外観設定する</label><pre class="src src-emacs-lisp">(all-the-icons-ivy-rich-mode 1)
(ivy-rich-mode 1)

(custom-set-faces
 '(ivy-current-match
   ((((class color) (background light))
     <span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"#FFF3F3"</span> <span style="font-weight: bold;">:distant-foreground</span> <span style="font-style: italic;">"#000000"</span>)
    (((class color) (background dark))
     <span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"#404040"</span> <span style="font-weight: bold;">:distant-foreground</span> <span style="font-style: italic;">"#abb2bf"</span>)))
 '(ivy-minibuffer-match-face-1
   ((((class color) (background light)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#666666"</span>)
    (((class color) (background dark)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#999999"</span>)))
 '(ivy-minibuffer-match-face-2
   ((((class color) (background light)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#c03333"</span> <span style="font-weight: bold;">:underline</span> t)
    (((class color) (background dark)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#e04444"</span> <span style="font-weight: bold;">:underline</span> t)))
 '(ivy-minibuffer-match-face-3
   ((((class color) (background light)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#8585ff"</span> <span style="font-weight: bold;">:underline</span> t)
    (((class color) (background dark)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#7777ff"</span> <span style="font-weight: bold;">:underline</span> t)))
 '(ivy-minibuffer-match-face-4
   ((((class color) (background light)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#439943"</span> <span style="font-weight: bold;">:underline</span> t)
    (((class color) (background dark)) <span style="font-weight: bold;">:foreground</span> <span style="font-style: italic;">"#33bb33"</span> <span style="font-weight: bold;">:underline</span> t))))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>履歴表示する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">smex</span> nil t)
  (<span style="font-weight: bold;">setq</span> smex-history-length 35)
  (<span style="font-weight: bold;">setq</span> smex-completion-method 'ivy))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>有効化</label><pre class="src src-emacs-lisp">(ivy-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org93b4262" class="outline-2">
<h2 id="org93b4262"><span class="section-number-2">16.</span> counsel</h2>
<div class="outline-text-2" id="text-16">
<p>
counselはさまざまなインクリメンタル検索を可能にするパッケージ。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>キーバインド</label><pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-x C-b"</span>) 'counsel-switch-buffer)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-f"</span>) 'counsel-find-file)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-u"</span>) 'ivy-resume)
(global-set-key (kbd <span style="font-style: italic;">"C-x C-g"</span>) 'counsel-git-grep)
(global-set-key (kbd <span style="font-style: italic;">"C-x r i"</span>) 'counsel-register)
(global-set-key (kbd <span style="font-style: italic;">"M-y"</span>) 'counsel-yank-pop)
(global-set-key (kbd <span style="font-style: italic;">"M-i"</span>) 'swiper-thing-at-point)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>検索エンジンをGoogleに設定する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> counsel-search-engine 'google)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>有効化</label><pre class="src src-emacs-lisp">(counsel-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org48950a0" class="outline-2">
<h2 id="org48950a0"><span class="section-number-2">17.</span> ag</h2>
<div class="outline-text-2" id="text-17">
<p>
agはgrepより高速な検索ツール。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>agのデフォルト入力値をthing-at-pointにする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ad:counsel-ag</span> (f <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> initial-input initial-directory extra-ag-args ag-prompt caller)
  (apply f (<span style="font-weight: bold;">or</span> initial-input (ivy-thing-at-point))
         (<span style="font-weight: bold;">unless</span> current-prefix-arg
           (<span style="font-weight: bold;">or</span> initial-directory default-directory))
         extra-ag-args ag-prompt caller))

(advice-add 'counsel-ag <span style="font-weight: bold;">:around</span> #'ad:counsel-ag)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5b00db2" class="outline-2">
<h2 id="org5b00db2"><span class="section-number-2">18.</span> eldoc</h2>
<div class="outline-text-2" id="text-18">
<p>
eldocは関数ドキュメントを表示するパッケージ。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>eldocをミニバッファに表示する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> <span style="font-style: italic;">"eldoc"</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">ad:eldoc-message</span> (f <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> string)
    (<span style="font-weight: bold;">unless</span> (active-minibuffer-window)
      (funcall f string)))
  (advice-add 'eldoc-message <span style="font-weight: bold;">:around</span> #'ad:eldoc-message))
</pre>
</div>
</div>
</div>
<div id="outline-container-org732fab7" class="outline-2">
<h2 id="org732fab7"><span class="section-number-2">19.</span> eshell</h2>
<div class="outline-text-2" id="text-19">
<p>
eshellはEmacs Lispで実装されたシェル。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>eshellの設定を追加する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/configure-eshell</span> ()
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Save command history when commands are entered</span>
  (add-hook 'eshell-pre-command-hook 'eshell-save-some-history)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Truncate buffer for performance</span>
  (add-to-list 'eshell-output-filter-functions 'eshell-truncate-buffer)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Bind some useful keys for evil-mode</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key eshell-mode-map (kbd "M-r") 'helm-eshell-history)</span>
  (<span style="font-weight: bold;">setq</span> eshell-history-size         10000
        eshell-buffer-maximum-lines 10000
        eshell-hist-ignoredups t
        eshell-scroll-to-bottom-on-input t
        eshell-git-prompt-use-theme 'multiline
        eshell-toggle-height-fraction 2
        eshell-toggle-use-projectile-root t))
(add-hook 'eshell-first-time-mode-hook 'efs/configure-eshell)
</pre>
</div>

<ul class="org-ul">
<li>ベース設定は <a href="https://github.com/daviwil/emacs-from-scratch/blob/master/show-notes/Emacs-09.org">https://github.com/daviwil/emacs-from-scratch/blob/master/show-notes/Emacs-09.org</a> から取ってきた</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>キーバインドを設定する</label><pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-M-;"</span>) 'eshell-toggle)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>eshellのサジェストを設定する</label><pre class="src src-emacs-lisp">(add-hook 'eshell-first-time-mode-hook 'esh-autosuggest-mode)
(<span style="font-weight: bold;">setq</span> esh-autosuggest-delay 0.5)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1434696" class="outline-2">
<h2 id="org1434696"><span class="section-number-2">20.</span> Vterm</h2>
<div class="outline-text-2" id="text-20">
<p>
vtermはCで実装されたシェル。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>各種設定する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> window-system
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">vterm</span>)
  (<span style="font-weight: bold;">setq</span> term-prompt-regexp <span style="font-style: italic;">"^[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">#$%&gt;\n]*[#$%&gt;] *"</span>)
  (<span style="font-weight: bold;">setq</span> vterm-toggle-scope 'project)
  (<span style="font-weight: bold;">setq</span> vterm-toggle-project-root t)
  (<span style="font-weight: bold;">setq</span> vterm-max-scrollback 10000)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">toggle</span>
  (global-set-key [f9] 'vterm-toggle)
  (global-set-key (kbd <span style="font-style: italic;">"C-M-:"</span>) 'vterm-toggle)
  (global-set-key [C-f9] 'vterm-toggle-cd)

  (<span style="font-weight: bold;">setq</span> vterm-toggle-fullscreen-p nil)
  (add-to-list 'display-buffer-alist
               '((<span style="font-weight: bold;">lambda</span>(bufname _) (<span style="font-weight: bold;">with-current-buffer</span> bufname
                                      (<span style="font-weight: bold;">or</span> (equal major-mode 'vterm-mode)
                                          (string-prefix-p vterm-buffer-name bufname))))
                 (display-buffer-reuse-window display-buffer-at-bottom)
                 <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(display-buffer-reuse-window display-buffer-in-direction)</span>
                 <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">display-buffer-in-direction/direction/dedicated is added in emacs27</span>
                 <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(direction . bottom)</span>
                 <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(dedicated . t) ;dedicated is supported in emacs27</span>
                 (reusable-frames . visible)
                 (window-height . 0.3))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org46745e3" class="outline-2">
<h2 id="org46745e3"><span class="section-number-2">21.</span> Theme</h2>
<div class="outline-text-2" id="text-21">
<p>
いい感じのテーマを設定する。割と白いテーマと黒いテーマを切り替えるのですぐ切り替えられるようにする。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>doom themeを読み込み</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">doom-themes</span>)
(doom-themes-org-config)
(<span style="font-weight: bold;">setq</span> custom-safe-themes t)
(<span style="font-weight: bold;">setq-default</span> custom-enabled-themes '(modus-operandi))
</pre>
</div>

<p>
doom themeはモダンなテーマ集。
</p>

<ul class="org-ul">
<li>ダーク系
<ul class="org-ul">
<li>doom-vibrant</li>
<li>spacemacs-dark</li>
<li>doom-dracula</li>
<li>modus-vivendi</li>
<li>leuven-dark</li>
</ul></li>
<li>ライト系
<ul class="org-ul">
<li>leuven</li>
<li>doom-acario-light</li>
<li>doom-homage-white</li>
<li>modus-operandi</li>
</ul></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>再適用する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">reapply-themes</span> ()
  <span style="font-style: italic;">"Forcibly load the themes listed in `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">custom-enabled-themes</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">dolist</span> (theme custom-enabled-themes)
    (<span style="font-weight: bold;">unless</span> (custom-theme-p theme)
      (load-theme theme)))
  (custom-set-variables `(custom-enabled-themes (<span style="font-weight: bold;">quote</span> ,custom-enabled-themes)))
  (efs/org-font-setup)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(kd/set-modus-face)</span>
  )

(add-hook 'after-init-hook 'reapply-themes)
</pre>
</div>

<p>
テーマ適用を最後に実行しないと、設定が上書きされることがあるため。
</p>
<ul class="org-ul">
<li><a href="https://github.com/purcell/emacs.d">https://github.com/purcell/emacs.d</a></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>モードライン設定</label><pre class="src src-emacs-lisp">(doom-modeline-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#34920;&#31034;&#38917;&#30446;&#12398;&#35373;&#23450;</span>
(<span style="font-weight: bold;">setq</span> doom-modeline-buffer-file-name-style 'truncate-with-project)
(<span style="font-weight: bold;">setq</span> doom-modeline-icon t)
(<span style="font-weight: bold;">setq</span> doom-modeline-major-mode-icon t)
(<span style="font-weight: bold;">setq</span> doom-modeline-minor-modes nil)
(<span style="font-weight: bold;">setq</span> doom-modeline-buffer-encoding nil)
(line-number-mode)
(column-number-mode)
(doom-modeline-def-modeline
  'my-simple-line
  '(bar matches buffer-info remote-host input-method major-mode process buffer-position)
  '(misc-info vcs checker))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#32294;&#35519;&#25972;</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-doom-modeline--font-height</span> ()
  (- (frame-char-height) 20))
(advice-add #'doom-modeline--font-height <span style="font-weight: bold;">:override</span> #'my-doom-modeline--font-height)
(<span style="font-weight: bold;">setq</span> doom-modeline-height 20)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">setup-custom-doom-modeline</span> ()
  (doom-modeline-set-modeline 'my-simple-line 'default))
(add-hook 'doom-modeline-mode-hook 'setup-custom-doom-modeline)

(setup-custom-doom-modeline)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>modus themeのカスタマイズ設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/set-modus-face</span> ()
  (<span style="font-weight: bold;">setq</span> modus-themes-slanted-constructs t
        modus-themes-bold-constructs t
        modus-themes-no-mixed-fonts t
        modus-themes-subtle-line-numbers t
        modus-themes-mode-line '(moody borderless)
        modus-themes-syntax 'faint
        modus-themes-paren-match 'intense-bold
        modus-themes-region 'bg-only
        modus-themes-diffs 'deuteranopia
        modus-themes-org-blocks 'gray-background
        modus-themes-variable-pitch-ui t
        modus-themes-variable-pitch-headings t
        modus-themes-scale-headings t
        modus-themes-scale-1 1.1
        modus-themes-scale-2 1.15
        modus-themes-scale-3 1.21
        modus-themes-scale-4 1.27
        modus-themes-scale-title 1.33)

  (set-face-foreground 'vertical-border <span style="font-style: italic;">"gray"</span>)

  (set-face-attribute 'mode-line nil
                      <span style="font-weight: bold;">:background</span> nil
                      <span style="font-weight: bold;">:overline</span> <span style="font-style: italic;">"black"</span>
                      <span style="font-weight: bold;">:underline</span> nil
                      <span style="font-weight: bold;">:box</span> nil)

  (set-face-attribute 'mode-line-inactive nil
                      <span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"white"</span>
                      <span style="font-weight: bold;">:overline</span> <span style="font-style: italic;">"gray"</span>
                      <span style="font-weight: bold;">:underline</span> nil
                      <span style="font-weight: bold;">:box</span> nil)

  (window-divider-mode 0))

(kd/set-modus-face)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>モードラインからマイナーモードを消す</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> my-hidden-minor-modes
      '(
        abbrev-mode
        auto-highlight-symbol-mode
        auto-revert-mode
        back-button-mode
        beacon-mode
        command-log-mode
        ctags-auto-update-mode
        eldoc-mode
        flyspell-mode
        global-whitespace-mode
        google-this-mode
        highlight-indent-guides-mode
        magit-auto-revert-mode
        projectile-mode
        projectile-rails-mode
        rinari-minor-mode
        robe-mode
        rubocop-mode
        ruby-electric-mode
        undo-tree-mode
        which-key-mode
        yas-minor-mode
        ))
(mapc (<span style="font-weight: bold;">lambda</span> (mode)
        (<span style="font-weight: bold;">setq</span> minor-mode-alist
              (cons (list mode <span style="font-style: italic;">""</span>) (assq-delete-all mode minor-mode-alist))))
      my-hidden-minor-modes)
</pre>
</div>

<p>
describe-minor-mode-from-indicator で調べられる。
</p>
</div>
</div>

<div id="outline-container-orgc7cc2c3" class="outline-2">
<h2 id="orgc7cc2c3"><span class="section-number-2">22.</span> EXWM</h2>
<div class="outline-text-2" id="text-22">
<p>
EXWMはEmacs上で動くウィンドウマネージャ。
</p>
<ul class="org-ul">
<li><a href="https://github.com/daviwil/emacs-from-scratch/blob/39f63fe133cd4c41e13bbd1551c6517162851411/show-notes/Emacs-Desktop-03.org">https://github.com/daviwil/emacs-from-scratch/blob/39f63fe133cd4c41e13bbd1551c6517162851411/show-notes/Emacs-Desktop-03.org</a></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>require</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">exwm</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">exwm-config</span>)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ほかのウィンドウマネージャを置き換えて起動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-replace t)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ほかのワークスペースのバッファに移動できるようにする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exwm-layout-show-all-buffers t)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>マウス設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> mouse-autoselect-window nil
        focus-follows-mouse t
        exwm-workspace-warp-cursor t
        exwm-workspace-number 5)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ワークスペースのバッファに名前をつける</label><pre class="src src-emacs-lisp">(add-hook 'exwm-update-class-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (exwm-workspace-rename-buffer exwm-class-name)))
(add-hook 'exwm-update-title-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (<span style="font-weight: bold;">pcase</span> exwm-class-name
              (<span style="font-style: italic;">"qutebrowser"</span> (exwm-workspace-rename-buffer (format <span style="font-style: italic;">"Qutebrowser: %s"</span> exwm-title)))
              (<span style="font-style: italic;">"chrome"</span> (exwm-workspace-rename-buffer (format <span style="font-style: italic;">"Chrome: %s"</span> exwm-title))))))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ウィンドウのセットを起動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/set-init</span> ()
  <span style="font-style: italic;">"Window Manager&#38306;&#20418;&#12398;&#21508;&#31278;&#12503;&#12525;&#12464;&#12521;&#12512;&#12434;&#36215;&#21205;&#12377;&#12427;."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">progn</span>
    (call-process-shell-command <span style="font-style: italic;">"shepherd"</span>)
    (call-process-shell-command <span style="font-style: italic;">"~/dotfiles/.config/polybar/launch.sh"</span>)
    (call-process-shell-command <span style="font-style: italic;">"blueberry"</span>)

    (exwm-workspace-switch-create 2)
    (start-process-shell-command <span style="font-style: italic;">"google-chrome"</span> nil <span style="font-style: italic;">"google-chrome"</span>)
    (start-process-shell-command <span style="font-style: italic;">"firefox"</span> nil <span style="font-style: italic;">"firefox"</span>)
    (start-process-shell-command <span style="font-style: italic;">"spotify"</span> nil <span style="font-style: italic;">"spotify"</span>)

    (message <span style="font-style: italic;">"please wait..."</span>)
    (sleep-for 2)

    (exwm-workspace-switch-create 0)
    (persp-switch <span style="font-style: italic;">"1"</span>)
    (delete-other-windows)
    (org-journal-new-entry nil)
    (vterm-toggle)
    (vterm-toggle)
    (persp-switch <span style="font-style: italic;">"2"</span>)
    (find-file <span style="font-style: italic;">"~/roam"</span>)
    (vterm-toggle)
    (vterm-toggle)
    (org-agenda nil <span style="font-style: italic;">"z"</span>)
    (persp-switch <span style="font-style: italic;">"3"</span>)
    (split-window-right)
    (switch-to-buffer <span style="font-style: italic;">"firefox"</span>)
    (persp-switch <span style="font-style: italic;">"4"</span>)
    (switch-to-buffer <span style="font-style: italic;">"firefox"</span>)
    (vterm-toggle)
    (vterm-toggle)
    (persp-switch <span style="font-style: italic;">"5"</span>)
    (find-file <span style="font-style: italic;">"~/dotfiles"</span>)
    (vterm-toggle)
    (vterm-toggle)
    (magit-status)
    (persp-switch <span style="font-style: italic;">"6"</span>)
    (find-file <span style="font-style: italic;">"~/.emacs.d/conf"</span>)
    (vterm-toggle)
    (vterm-toggle)
    (magit-status)
    (persp-switch <span style="font-style: italic;">"7"</span>)
    (find-file <span style="font-style: italic;">"~/ProjectOrg"</span>)
    (persp-switch <span style="font-style: italic;">"8"</span>)
    (find-file <span style="font-style: italic;">"~/Project"</span>)
    (persp-switch <span style="font-style: italic;">"9"</span>)
    (elfeed)

    (exwm-workspace-switch-create 1)
    (persp-switch <span style="font-style: italic;">"1"</span>)
    (persp-switch <span style="font-style: italic;">"2"</span>)
    (find-file <span style="font-style: italic;">"~/roam"</span>)
    (org-agenda nil <span style="font-style: italic;">"z"</span>)
    (persp-switch <span style="font-style: italic;">"4"</span>)
    (switch-to-buffer <span style="font-style: italic;">"Google-chrome"</span>)
    (persp-switch <span style="font-style: italic;">"8"</span>)
    (find-file <span style="font-style: italic;">"~/Project"</span>)

    (exwm-workspace-switch-create 2)
    (switch-to-buffer <span style="font-style: italic;">"Spotify"</span>)

    (exwm-workspace-switch-create 0)
    (persp-switch <span style="font-style: italic;">"4"</span>)

    (message <span style="font-style: italic;">"settings done!"</span>)))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>背景を設定する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/set-background</span> ()
  <span style="font-style: italic;">"&#32972;&#26223;&#12434;&#12475;&#12483;&#12488;&#12377;&#12427;."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (start-process-shell-command <span style="font-style: italic;">"compton"</span> nil <span style="font-style: italic;">"compton --config ~/dotfiles/.config/compton/compton.conf"</span>)
  (start-process-shell-command <span style="font-style: italic;">"fehbg"</span> nil <span style="font-style: italic;">"~/dotfiles/.fehbg"</span>))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>キーバインド設定</label><pre class="src src-emacs-lisp">(define-key exwm-mode-map (kbd <span style="font-style: italic;">"C-M-:"</span>) 'vterm-toggle)
(define-key exwm-mode-map (kbd <span style="font-style: italic;">"C-M-&lt;right&gt;"</span>) 'persp-next)
(define-key exwm-mode-map (kbd <span style="font-style: italic;">"C-M-&lt;left&gt;"</span>) 'persp-prev)
(define-key exwm-mode-map (kbd <span style="font-style: italic;">"&lt;henkan&gt;"</span>) 'pretty-hydra-henkan/body)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>設定する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> window-system
  (<span style="font-weight: bold;">progn</span>
    (exwm-config-example)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(kd/set-init)</span>
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(kd/set-background)</span>
    ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org88cdaed" class="outline-2">
<h2 id="org88cdaed"><span class="section-number-2">23.</span> Polybar</h2>
<div class="outline-text-2" id="text-23">
<p>
polybarは柔軟にカスタマイズできるメニューバーを表示するソフトウェア。polybarとの連携を記載する。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>polybarプロセスを保持する変数</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">kd/polybar-process</span> nil
  <span style="font-style: italic;">"Holds the process of the running Polybar instance, if any"</span>)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>バーを起動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/start-panel</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (kd/kill-panel)
  (<span style="font-weight: bold;">setq</span> kd/polybar-process (start-process-shell-command <span style="font-style: italic;">"polybar"</span> nil <span style="font-style: italic;">"~/dotfiles/.config/polybar/launch.sh"</span>)))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>バーを停止する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/kill-panel</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> kd/polybar-process
    (<span style="font-weight: bold;">ignore-errors</span>
      (kill-process kd/polybar-process)))
  (<span style="font-weight: bold;">setq</span> kd/polybar-process nil))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ワークスペースをpolybarで表示する設定</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/polybar-exwm-workspace</span> ()
  (<span style="font-weight: bold;">pcase</span> exwm-workspace-current-index
    (0 <span style="font-style: italic;">"%{F#797D7F}Work%{F-} Home"</span>)
    (1 <span style="font-style: italic;">"Work %{F#797D7F}Home%{F-}"</span>)
    (2 <span style="font-style: italic;">"&#59540;"</span>)
    (3 <span style="font-style: italic;">"&#59641;"</span>)
    (4 <span style="font-style: italic;">"&#57418;"</span>)
    (9 <span style="font-style: italic;">"&#61820;"</span>)))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/send-polybar-exwm-workspace</span> ()
  (kd/send-polybar-hook <span style="font-style: italic;">"exwm-workspace"</span> 1))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/send-polybar-hook</span> (module-name hook-index)
  (start-process-shell-command <span style="font-style: italic;">"polybar-msg"</span> nil (format <span style="font-style: italic;">"polybar-msg hook %s %s"</span> module-name hook-index)))

(add-hook 'exwm-workspace-switch-hook #'kd/send-polybar-exwm-workspace)
</pre>
</div>
</div>
</div>
<div id="outline-container-org0dda401" class="outline-2">
<h2 id="org0dda401"><span class="section-number-2">24.</span> Workspace</h2>
<div class="outline-text-2" id="text-24">
<p>
1~9のワークスペースを作成し、番号で切り替えられるようにする。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>モード初期化</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">perspective</span>)
(<span style="font-weight: bold;">setq</span> persp-initial-frame-name <span style="font-style: italic;">"1"</span>)
(<span style="font-weight: bold;">setq</span> persp-modestring-dividers '(<span style="font-style: italic;">""</span> <span style="font-style: italic;">""</span> <span style="font-style: italic;">" "</span>))
(persp-mode 1)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ワークスペースを生成する</label><pre class="src src-emacs-lisp">(mapc (<span style="font-weight: bold;">lambda</span> (i)
        (persp-switch (int-to-string i)))
      (number-sequence 1 9))
(persp-switch <span style="font-style: italic;">"1"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5d91f95" class="outline-2">
<h2 id="org5d91f95"><span class="section-number-2">25.</span> Hydra</h2>
<div class="outline-text-2" id="text-25">
<p>
Hydraはカスタマイズ可能なキー表示を追加するパッケージ。キーバインド空間を制限しつつ、入力のヒントを表示して使いやすくする。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>グローバルに便利なメニューを追加する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> 'pretty-hydra
  (pretty-hydra-define pretty-hydra-henkan (<span style="font-weight: bold;">:color</span> blue <span style="font-weight: bold;">:foreign-keys</span> warn <span style="font-weight: bold;">:title</span> <span style="font-style: italic;">"Convenient Tools"</span>)
    (<span style="font-style: italic;">"Media"</span>
     ((<span style="font-style: italic;">"&lt;prior&gt;"</span> kd/mint-volume-up <span style="font-style: italic;">"up"</span>)
      (<span style="font-style: italic;">"&lt;next&gt;"</span> kd/mint-volume-down <span style="font-style: italic;">"down"</span>)
      (<span style="font-style: italic;">"&lt;pause&gt;"</span> kd/player-stop <span style="font-style: italic;">"stop"</span>))

     <span style="font-style: italic;">"Find"</span>
     ((<span style="font-style: italic;">"a"</span> counsel-apropos <span style="font-style: italic;">"apropos"</span>)
      (<span style="font-style: italic;">"f"</span> counsel-ag <span style="font-style: italic;">"ag"</span>)
      (<span style="font-style: italic;">"h"</span> counsel-find-library <span style="font-style: italic;">"lib"</span>)
      (<span style="font-style: italic;">"i"</span> counsel-imenu <span style="font-style: italic;">"imenu"</span>)
      (<span style="font-style: italic;">"r"</span> counsel-register <span style="font-style: italic;">"register"</span>)
      (<span style="font-style: italic;">"b"</span> counsel-bookmark <span style="font-style: italic;">"bookmark"</span>)
      (<span style="font-style: italic;">"p"</span> persp-ivy-switch-buffer <span style="font-style: italic;">"persp-buffer"</span>)
      (<span style="font-style: italic;">"w"</span> swiper-all-thing-at-point <span style="font-style: italic;">"all"</span>))

     <span style="font-style: italic;">"Execute"</span>
     ((<span style="font-style: italic;">"e"</span> counsel-linux-app <span style="font-style: italic;">"run"</span>)
      (<span style="font-style: italic;">"c"</span> recompile <span style="font-style: italic;">"recompile"</span>)
      (<span style="font-style: italic;">"s"</span> counsel-search <span style="font-style: italic;">"google"</span>))

     <span style="font-style: italic;">"Git"</span>
     ((<span style="font-style: italic;">"g"</span> magit-blame)
      (<span style="font-style: italic;">"&gt;"</span> git-gutter+-next-hunk)
      (<span style="font-style: italic;">"&lt;"</span> git-gutter+-previous-hunk)
      (<span style="font-style: italic;">"@"</span> git-timemachine)
      (<span style="font-style: italic;">"l"</span> git-link))

     <span style="font-style: italic;">"Edit"</span>
     ((<span style="font-style: italic;">"q"</span> query-replace <span style="font-style: italic;">"replace"</span>)
      (<span style="font-style: italic;">"y"</span> ivy-yasnippet <span style="font-style: italic;">"yas"</span>))

     <span style="font-style: italic;">"Window"</span>
     ((<span style="font-style: italic;">"1"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 1))) <span style="font-style: italic;">"Journal"</span>)
      (<span style="font-style: italic;">"2"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 2))) <span style="font-style: italic;">"Roam"</span>)
      (<span style="font-style: italic;">"3"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 3))) <span style="font-style: italic;">"Browser(Half)"</span>)
      (<span style="font-style: italic;">"4"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 4))) <span style="font-style: italic;">"Browser(Full)"</span>)
      (<span style="font-style: italic;">"5"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 5))) <span style="font-style: italic;">"Dotfiles"</span>)
      (<span style="font-style: italic;">"6"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 6))) <span style="font-style: italic;">"Emacs"</span>)
      (<span style="font-style: italic;">"7"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 7))) <span style="font-style: italic;">"Sub"</span>)
      (<span style="font-style: italic;">"8"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 8))) <span style="font-style: italic;">"Main"</span>)
      (<span style="font-style: italic;">"9"</span> (<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>) (persp-switch (int-to-string 9))) <span style="font-style: italic;">"Blueberry"</span>))))

  (define-key global-map (kbd <span style="font-style: italic;">"&lt;henkan&gt;"</span>) 'pretty-hydra-henkan/body))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Railsに便利なメニューを定義する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">with-eval-after-load</span> 'pretty-hydra
  (pretty-hydra-define pretty-hydra-projectile-rails-find (<span style="font-weight: bold;">:color</span> blue <span style="font-weight: bold;">:foreign-keys</span> warn <span style="font-weight: bold;">:title</span> <span style="font-style: italic;">"Projectile Rails"</span>)
    (<span style="font-style: italic;">"Current"</span>
     ((<span style="font-style: italic;">"M"</span> projectile-rails-find-current-model      <span style="font-style: italic;">"Current model"</span>)
      (<span style="font-style: italic;">"V"</span> projectile-rails-find-current-view       <span style="font-style: italic;">"Current view"</span>)
      (<span style="font-style: italic;">"C"</span> projectile-rails-find-current-controller <span style="font-style: italic;">"Current controller"</span>)
      (<span style="font-style: italic;">"H"</span> projectile-rails-find-current-helper     <span style="font-style: italic;">"Current helper"</span>)
      (<span style="font-style: italic;">"P"</span> projectile-rails-find-current-spec       <span style="font-style: italic;">"Current spec"</span>)
      (<span style="font-style: italic;">"Z"</span> projectile-rails-find-current-serializer <span style="font-style: italic;">"Current serializer"</span>))

     <span style="font-style: italic;">"App"</span>
     ((<span style="font-style: italic;">"m"</span> projectile-rails-find-model           <span style="font-style: italic;">"Model"</span>)
      (<span style="font-style: italic;">"v"</span> projectile-rails-find-view            <span style="font-style: italic;">"View"</span>)
      (<span style="font-style: italic;">"c"</span> projectile-rails-find-controller      <span style="font-style: italic;">"Controller"</span>)
      (<span style="font-style: italic;">"h"</span> projectile-rails-find-helper          <span style="font-style: italic;">"Helper"</span>)
      (<span style="font-style: italic;">"@"</span> projectile-rails-find-mailer          <span style="font-style: italic;">"Mailer"</span>)
      (<span style="font-style: italic;">"y"</span> projectile-rails-find-layout       <span style="font-style: italic;">"Layout"</span>)
      (<span style="font-style: italic;">"z"</span> projectile-rails-find-serializer      <span style="font-style: italic;">"Serializer"</span>))

     <span style="font-style: italic;">"Assets"</span>
     ((<span style="font-style: italic;">"j"</span> projectile-rails-find-javascript  <span style="font-style: italic;">"Javascript"</span>)
      (<span style="font-style: italic;">"s"</span> projectile-rails-find-stylesheet  <span style="font-style: italic;">"CSS"</span>))

     <span style="font-style: italic;">"Other"</span>
     ((<span style="font-style: italic;">"n"</span> projectile-rails-find-migration    <span style="font-style: italic;">"Migration"</span>)
      (<span style="font-style: italic;">"r"</span> projectile-rails-find-rake-task    <span style="font-style: italic;">"Rake task"</span>)
      (<span style="font-style: italic;">"i"</span> projectile-rails-find-initializer  <span style="font-style: italic;">"Initializer"</span>)
      (<span style="font-style: italic;">"l"</span> projectile-rails-find-lib          <span style="font-style: italic;">"Lib"</span>)
      (<span style="font-style: italic;">"p"</span> projectile-rails-find-spec         <span style="font-style: italic;">"Spec"</span>)
      (<span style="font-style: italic;">"t"</span> projectile-rails-find-locale       <span style="font-style: italic;">"Translation"</span>))

     <span style="font-style: italic;">"Single Files"</span>
     ((<span style="font-style: italic;">"R"</span> projectile-rails-goto-routes   <span style="font-style: italic;">"routes.rb"</span>)
      (<span style="font-style: italic;">"G"</span> projectile-rails-goto-gemfile  <span style="font-style: italic;">"Gemfile"</span>)
      (<span style="font-style: italic;">"D"</span> projectile-rails-goto-schema   <span style="font-style: italic;">"schema.rb"</span>)))))
</pre>
</div>

<ul class="org-ul">
<li><a href="https://mugijiru.github.io/.emacs.d/programming/rails/">https://mugijiru.github.io/.emacs.d/programming/rails/</a></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>major-mode-hydra</label><pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"M-SPC"</span>) #'major-mode-hydra)

(<span style="font-weight: bold;">with-eval-after-load</span> 'major-mode-hydra
  (major-mode-hydra-define emacs-lisp-mode nil
    (<span style="font-style: italic;">"Eval"</span>
     ((<span style="font-style: italic;">"b"</span> eval-buffer <span style="font-style: italic;">"buffer"</span>)
      (<span style="font-style: italic;">"e"</span> eval-defun <span style="font-style: italic;">"defun"</span>)
      (<span style="font-style: italic;">"r"</span> eval-region <span style="font-style: italic;">"region"</span>))
     <span style="font-style: italic;">"REPL"</span>
     ((<span style="font-style: italic;">"I"</span> ielm <span style="font-style: italic;">"ielm"</span>))
     <span style="font-style: italic;">"Test"</span>
     ((<span style="font-style: italic;">"t"</span> ert <span style="font-style: italic;">"prompt"</span>)
      (<span style="font-style: italic;">"T"</span> (ert t) <span style="font-style: italic;">"all"</span>)
      (<span style="font-style: italic;">"F"</span> (ert <span style="font-weight: bold;">:failed</span>) <span style="font-style: italic;">"failed"</span>))
     <span style="font-style: italic;">"Doc"</span>
     ((<span style="font-style: italic;">"f"</span> describe-function <span style="font-style: italic;">"function"</span>)
      (<span style="font-style: italic;">"v"</span> describe-variable <span style="font-style: italic;">"variable"</span>)
      (<span style="font-style: italic;">"i"</span> info-lookup-symbol <span style="font-style: italic;">"info lookup"</span>)))))

(<span style="font-weight: bold;">with-eval-after-load</span> 'major-mode-hydra
  (major-mode-hydra-define org-agenda-mode nil
    (<span style="font-style: italic;">"pomodoro"</span>
     ((<span style="font-style: italic;">"s"</span> org-pomodoro <span style="font-style: italic;">"start org-pomodoro"</span>)))))
</pre>
</div>

<p>
メジャーモードに対するhydraを設定する。
</p>
</div>
</div>

<div id="outline-container-org7654b4f" class="outline-2">
<h2 id="org7654b4f"><span class="section-number-2">26.</span> Display Manager</h2>
<div class="outline-text-2" id="text-26">
<p>
OS操作の便利関数。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>音量調整する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/mint-volume-up</span> ()
  <span style="font-style: italic;">"Linux Mint&#12391;&#12398;&#38899;&#37327;&#12450;&#12483;&#12503;."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (start-process-shell-command <span style="font-style: italic;">"volume up"</span> nil <span style="font-style: italic;">"pactl set-sink-volume @DEFAULT_SINK@ +5%"</span>))

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/mint-volume-down</span> ()
  <span style="font-style: italic;">"Linux Mint&#12391;&#12398;&#38899;&#37327;&#12480;&#12454;&#12531;."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (start-process-shell-command <span style="font-style: italic;">"volume up"</span> nil <span style="font-style: italic;">"pactl set-sink-volume @DEFAULT_SINK@ -5%"</span>))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>再生を停止する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/player-stop</span> ()
  <span style="font-style: italic;">"&#20877;&#29983;&#20572;&#27490;"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (start-process-shell-command <span style="font-style: italic;">"player stop"</span> nil <span style="font-style: italic;">"playerctl stop"</span>))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ネットワークを接続・切断する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/up-network</span> ()
  <span style="font-style: italic;">"&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#25509;&#32154;"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((passwd))
    (<span style="font-weight: bold;">setq</span> passwd (read-passwd <span style="font-style: italic;">"Password? "</span>))
    (shell-command  (concat <span style="font-style: italic;">"for intf in /sys/class/net/*; do echo "</span>
                            (shell-quote-argument passwd)
                            <span style="font-style: italic;">" | sudo -S ifconfig `basename $intf` up; done"</span>))))
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/down-network</span> ()
  <span style="font-style: italic;">"&#12493;&#12483;&#12488;&#12527;&#12540;&#12463;&#20999;&#26029;"</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((passwd))
    (<span style="font-weight: bold;">setq</span> passwd (read-passwd <span style="font-style: italic;">"Password? "</span>))
    (shell-command  (concat <span style="font-style: italic;">"for intf in /sys/class/net/*; do echo "</span>
                            (shell-quote-argument passwd)
                            <span style="font-style: italic;">" | sudo -S ifconfig `basename $intf` down; done"</span>))))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>英語辞書をインストールする</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package ej-dict</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:straight (:host github :repo "kijimaD/ej-dict"))</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(ej-dict-install-dict)</span>
</pre>
</div>

<p>
あまり使ってないのでコメントアウトしている。
</p>
</div>
</div>
<div id="outline-container-org584d4cd" class="outline-2">
<h2 id="org584d4cd"><span class="section-number-2">27.</span> Helper</h2>
<div class="outline-text-2" id="text-27">
<p>
その他の便利関数。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>前のマークに戻る</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-exchange-point-and-mark</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (exchange-point-and-mark)
  (deactivate-mark))
(global-set-key (kbd <span style="font-style: italic;">"C-x C-x"</span>) 'my-exchange-point-and-mark)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>行全体を削除する</label><pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-c C-k"</span>) 'kill-whole-line)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>カレントパスを取得する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">current-path</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((file-path buffer-file-name)
        (dir-path default-directory))
    (<span style="font-weight: bold;">cond</span> (file-path
           (kill-new (expand-file-name file-path))
           (message <span style="font-style: italic;">"Add Kill Ring: %s"</span> (expand-file-name file-path)))
          (dir-path
           (kill-new (expand-file-name dir-path))
           (message <span style="font-style: italic;">"Add Kill Ring: %s"</span> (expand-file-name dir-path)))
          (t
           (error-message-string <span style="font-style: italic;">"Fail to get path name."</span>)))))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>i-searchで逆側にカーソルをセットする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-isearch-done-opposite</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> nopush edit)
  <span style="font-style: italic;">"End current search in the opposite side of the match."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (funcall #'isearch-done nopush edit)
  (<span style="font-weight: bold;">when</span> isearch-other-end (goto-char isearch-other-end)))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>カーソルを真ん中に保ちつつ行を1つ移動する</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-next-line</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (next-line)
  (recenter))
(global-set-key (kbd <span style="font-style: italic;">"&lt;down&gt;"</span>) 'my-next-line)

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-previous-line</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (previous-line)
  (recenter))
(global-set-key (kbd <span style="font-style: italic;">"&lt;up&gt;"</span>) 'my-previous-line)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ewwのキーバインドを設定する</label><pre class="src src-emacs-lisp">(eval-after-load <span style="font-style: italic;">"eww"</span>
  '(progn
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-1&gt;"</span>) 'my-next-line)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-2&gt;"</span>) 'define-word-at-point)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-4&gt;"</span>) 'my-previous-line)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;down-mouse-4&gt;"</span>) 'nil)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-5&gt;"</span>) 'my-next-line)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;down-mouse-5&gt;"</span>) 'nil)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-3&gt;"</span>) 'my-previous-line)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-8&gt;"</span>) 'backward-word)
     (define-key eww-mode-map (kbd <span style="font-style: italic;">"&lt;mouse-9&gt;"</span>) 'forward-word)))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>最後のタイマーをキャンセルする</label><pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">kd/cancel-last-timer</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (cancel-timer (car (last timer-list))))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Cの関数に定義ジャンプできるようにする</label><pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Emacs C source directory</span>
(<span style="font-weight: bold;">let</span> ((src-dir <span style="font-style: italic;">"~/ProjectOrg/emacs/src"</span>))
  (<span style="font-weight: bold;">if</span> (file-directory-p src-dir)
      (<span style="font-weight: bold;">setq</span> source-directory src-dir)))
</pre>
</div>

<p>
<code>~/ProjectOrg</code> にEmacsのソースコードを配置しておく。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2022-12-18 Sun 14:35</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>